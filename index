<!DOCTYPE html>

<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„ØºÙŠØ§Ø¨ Ø§Ù„Ø´Ø§Ù…Ù„ - 1448 Ù‡Ù€</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800;900&family=Amiri:wght@400;700&display=swap" rel="stylesheet"/>
<style>
:root {
  --navy:    #0a2463;
  --blue:    #1e5ef3;
  --blue-md: #3a7bff;
  --blue-lt: #e8f0ff;
  --blue-xs: #f3f7ff;
  --sky:     #7eb5ff;
  --teal:    #14b8a6;
  --teal-lt: #ccfbf1;
  --present: #16a34a;
  --present-lt: #dcfce7;
  --absent:  #dc2626;
  --absent-lt: #fee2e2;
  --excused: #d97706;
  --excused-lt: #fef3c7;
  --late:    #7c3aed;
  --late-lt: #ede9fe;
  --gray-50: #f8faff;
  --gray-100:#eef2fb;
  --gray-200:#dde5f7;
  --gray-400:#8fa8d6;
  --gray-600:#4a6080;
  --gray-800:#1c2b45;
  --white:   #ffffff;
  --shadow-sm: 0 2px 8px rgba(10,36,99,.07);
  --shadow-md: 0 6px 24px rgba(10,36,99,.12);
  --shadow-lg: 0 16px 48px rgba(10,36,99,.16);
  --radius: 16px;
  --grade1: #3b82f6;
  --grade2: #8b5cf6;
  --grade3: #ec4899;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Cairo',sans-serif;background:var(--gray-50);color:var(--gray-800);direction:rtl;min-height:100vh}

/* â”€â”€ HEADER â”€â”€ */
.header{
background:linear-gradient(135deg,var(â€“navy) 0%,#0d3080 50%,#1a52c3 100%);
padding:24px 32px;
position:relative;overflow:hidden;
}
.header::before{
content:â€™â€™;position:absolute;top:-80px;left:-80px;
width:300px;height:300px;border-radius:50%;
background:rgba(255,255,255,.04);pointer-events:none;
}
.header::after{
content:â€™â€™;position:absolute;bottom:-60px;right:10%;
width:200px;height:200px;border-radius:50%;
background:rgba(126,181,255,.07);pointer-events:none;
}
.header-dots{
position:absolute;inset:0;
background-image:radial-gradient(circle,rgba(255,255,255,.06) 1px,transparent 1px);
background-size:22px 22px;pointer-events:none;
}
.header-inner{
display:flex;align-items:center;justify-content:space-between;
flex-wrap:wrap;gap:16px;position:relative;z-index:1;
}
.header-left{}
.header-badge{
display:inline-flex;align-items:center;gap:7px;
background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.2);
border-radius:100px;padding:5px 14px;margin-bottom:10px;
font-size:11px;font-weight:700;color:rgba(255,255,255,.85);letter-spacing:.5px;
}
.header-title{font-size:26px;font-weight:900;color:#fff;line-height:1.2;margin-bottom:4px}
.header-sub{font-size:13px;color:rgba(255,255,255,.6);font-weight:500}
.header-right{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.header-stat{
background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.15);
border-radius:12px;padding:12px 20px;text-align:center;min-width:80px;
backdrop-filter:blur(8px);
}
.header-stat .sv{font-size:22px;font-weight:900;color:#fff;line-height:1}
.header-stat .sl{font-size:10px;color:rgba(255,255,255,.6);margin-top:3px}

.user-badge{
background:rgba(255,255,255,.15);
border:1px solid rgba(255,255,255,.25);
border-radius:12px;
padding:8px 14px;
display:flex;
align-items:center;
gap:8px;
cursor:pointer;
transition:all .2s;
}
.user-badge:hover{background:rgba(255,255,255,.2)}
.user-avatar{
width:28px;height:28px;
border-radius:50%;
background:linear-gradient(135deg,#3a7bff,#7eb5ff);
display:flex;align-items:center;justify-content:center;
font-size:11px;font-weight:800;color:#fff;
}
.user-name{font-size:11px;font-weight:700;color:#fff}
.user-role{font-size:9px;color:rgba(255,255,255,.6)}

/* â”€â”€ TABS â”€â”€ */
.tabs-bar{
display:flex;gap:4px;padding:16px 32px 0;
background:#fff;border-bottom:1px solid var(â€“gray-200);
position:sticky;top:0;z-index:50;
}
.tab-btn{
padding:10px 20px;border-radius:12px 12px 0 0;
font-family:â€˜Cairoâ€™,sans-serif;font-size:13px;font-weight:700;
cursor:pointer;transition:all .2s;color:var(â€“gray-400);
border:none;background:none;border-bottom:3px solid transparent;
}
.tab-btn.active{color:var(â€“blue);border-bottom-color:var(â€“blue);background:var(â€“blue-xs)}
.tab-btn:not(.active):hover{color:var(â€“navy);background:var(â€“gray-100)}

/* â”€â”€ PAGES â”€â”€ */
.page{display:none;padding:24px 32px 40px}
.page.active{display:block}

/* â”€â”€ STUDENT MANAGER STYLES â”€â”€ */
.mgr-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}
.mgr-card{
background:#fff;
border-radius:var(â€“radius);
border:1px solid var(â€“gray-200);
box-shadow:var(â€“shadow-sm);
padding:20px;
}
.mgr-card-title{
font-size:16px;
font-weight:800;
color:var(â€“navy);
margin-bottom:16px;
display:flex;
align-items:center;
gap:8px;
}
.form-grid{
display:grid;
grid-template-columns:repeat(3,1fr);
gap:12px;
margin-bottom:12px;
}
.form-group{
display:flex;
flex-direction:column;
gap:6px;
}
.form-label{
font-size:11px;
font-weight:700;
color:var(â€“gray-600);
}
.form-input,.form-select{
padding:10px 14px;
border:1.5px solid var(â€“gray-200);
border-radius:10px;
font-family:â€˜Cairoâ€™,sans-serif;
font-size:13px;
outline:none;
transition:all .2s;
}
.form-input:focus,.form-select:focus{
border-color:var(â€“blue);
box-shadow:0 0 0 3px rgba(30,94,243,.1);
}
.btn{
padding:9px 18px;border-radius:10px;
font-family:â€˜Cairoâ€™,sans-serif;font-size:12px;font-weight:700;
cursor:pointer;display:flex;align-items:center;gap:6px;
transition:all .2s;border:none;
}
.btn-primary{background:linear-gradient(135deg,var(â€“blue),#0d3aaa);color:#fff;box-shadow:0 3px 12px rgba(30,94,243,.3)}
.btn-primary:hover{transform:translateY(-1px);box-shadow:0 5px 16px rgba(30,94,243,.4)}
.btn-outline{background:#fff;color:var(â€“blue);border:1.5px solid var(â€“blue-lt)}
.btn-outline:hover{background:var(â€“blue-xs)}
.btn-success{background:linear-gradient(135deg,var(â€“present),#15803d);color:#fff}
.btn-danger{background:linear-gradient(135deg,var(â€“absent),#b91c1c);color:#fff}

.students-list{
max-height:500px;
overflow-y:auto;
}
.student-item{
display:flex;
align-items:center;
gap:12px;
padding:12px;
background:var(â€“gray-50);
border-radius:10px;
margin-bottom:8px;
transition:all .2s;
}
.student-item:hover{
background:var(â€“blue-lt);
transform:translateX(-3px);
}
.student-avatar{
width:40px;
height:40px;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
font-weight:800;
color:#fff;
font-size:14px;
flex-shrink:0;
}
.student-info{
flex:1;
}
.student-name{
font-size:13px;
font-weight:700;
color:var(â€“navy);
margin-bottom:2px;
}
.student-meta{
font-size:10px;
color:var(â€“gray-600);
}
.student-actions{
display:flex;
gap:6px;
}
.btn-icon{
width:32px;
height:32px;
border-radius:8px;
display:flex;
align-items:center;
justify-content:center;
cursor:pointer;
border:none;
transition:all .2s;
font-size:13px;
}
.btn-edit{background:var(â€“blue-lt);color:var(â€“blue)}
.btn-delete{background:var(â€“absent-lt);color:var(â€“absent)}

.import-area{
border:2px dashed var(â€“gray-200);
border-radius:12px;
padding:20px;
background:var(â€“gray-50);
margin-bottom:12px;
}
.import-area textarea{
width:100%;
min-height:120px;
padding:12px;
border:1.5px solid var(â€“gray-200);
border-radius:10px;
font-family:â€˜Cairoâ€™,sans-serif;
font-size:12px;
margin-top:10px;
resize:vertical;
outline:none;
}
.import-area textarea:focus{
border-color:var(â€“blue);
box-shadow:0 0 0 3px rgba(30,94,243,.1);
}

.output-box{
background:var(â€“gray-800);
color:#fff;
padding:16px;
border-radius:12px;
font-family:â€˜Courier Newâ€™,monospace;
font-size:11px;
max-height:300px;
overflow-y:auto;
direction:ltr;
text-align:left;
}
.output-box pre{
margin:0;
white-space:pre-wrap;
word-wrap:break-word;
}

.counter{
text-align:center;
padding:16px;
background:linear-gradient(135deg,var(â€“blue-xs),var(â€“blue-lt));
border-radius:12px;
margin-bottom:20px;
}
.counter-num{
font-size:32px;
font-weight:900;
color:var(â€“blue);
margin-bottom:4px;
}
.counter-label{
font-size:12px;
color:var(â€“gray-600);
font-weight:600;
}

@media(max-width:900px){
.mgr-grid{grid-template-columns:1fr}
.form-grid{grid-template-columns:1fr}
}

@media(max-width:768px){
div[style*=â€œgrid-template-columns:1fr auto 1frâ€]{
grid-template-columns:1fr!important;
text-align:center!important;
}
div[style*=â€œtext-align:leftâ€]{
text-align:center!important;
}
div[style*=â€œtext-align:rightâ€]{
text-align:center!important;
}
}

/* â”€â”€ PRINT STYLES â”€â”€ */
@media print {
body{background:#fff}
.tabs-bar,.user-badge,.btn{display:none}
.header{background:#fff!important;color:#000!important;border-bottom:3px solid #14b8a6}
.header-title,.header-sub{color:#000!important}
.header-badge{display:none}
@page {
margin:2cm;
size:A4;
}
}
</style>

</head>
<body>

<!-- â•â• LOGIN MODAL â•â• -->

<div id="loginModal" style="position:fixed;inset:0;background:rgba(10,36,99,.85);backdrop-filter:blur(8px);z-index:9999;display:flex;align-items:center;justify-content:center">
  <div style="background:#fff;border-radius:20px;padding:40px;width:90%;max-width:450px;box-shadow:0 20px 60px rgba(0,0,0,.3)">
    <div style="text-align:center;margin-bottom:30px">
      <div style="width:80px;height:80px;background:linear-gradient(135deg,var(--blue),var(--navy));border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 16px;font-size:36px">ğŸ”</div>
      <h2 style="font-size:24px;font-weight:900;color:var(--navy);margin-bottom:8px">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
      <p style="font-size:13px;color:var(--gray-600)">Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„ØºÙŠØ§Ø¨ - Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø¨Ø¬Ø§Ø²Ø§Ù†</p>
    </div>

```
<div style="margin-bottom:24px">
  <label style="display:block;font-size:12px;font-weight:700;color:var(--gray-600);margin-bottom:8px">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ</label>
  <input type="password" id="passwordInput" placeholder="Ø£Ø¯Ø®Ù„ÙŠ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ..." 
         style="width:100%;padding:14px 16px;border:2px solid var(--gray-200);border-radius:12px;font-family:'Cairo',sans-serif;font-size:14px;outline:none;transition:all .2s"
         onkeypress="if(event.key==='Enter')attemptLogin()"
         onfocus="this.style.borderColor='var(--blue)';this.style.boxShadow='0 0 0 3px rgba(30,94,243,.1)'"
         onblur="this.style.borderColor='var(--gray-200)';this.style.boxShadow='none'">
  <div id="loginError" style="display:none;margin-top:8px;padding:10px;background:var(--absent-lt);color:var(--absent);border-radius:8px;font-size:12px;font-weight:600"></div>
</div>

<button onclick="attemptLogin()" style="width:100%;padding:14px;background:linear-gradient(135deg,var(--blue),var(--navy));color:#fff;border:none;border-radius:12px;font-family:'Cairo',sans-serif;font-size:14px;font-weight:700;cursor:pointer;transition:all .2s;margin-bottom:16px"
        onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 8px 20px rgba(30,94,243,.3)'"
        onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='none'">
  ğŸ”“ Ø¯Ø®ÙˆÙ„
</button>

<button onclick="enterViewMode()" style="width:100%;padding:12px;background:var(--gray-100);color:var(--gray-600);border:none;border-radius:12px;font-family:'Cairo',sans-serif;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s"
        onmouseover="this.style.background='var(--gray-200)'"
        onmouseout="this.style.background='var(--gray-100)'">
  ğŸ‘ï¸ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·
</button>

<div style="margin-top:20px;padding-top:20px;border-top:1px solid var(--gray-200);text-align:center">
  <p style="font-size:11px;color:var(--gray-400);margin-bottom:8px">ğŸ’¡ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠØŒ ØªÙˆØ§ØµÙ„ÙŠ Ù…Ø¹ Ø§Ù„Ù…Ø´Ø±ÙØ©</p>
  <p style="font-size:10px;color:var(--gray-400)">Ø£. Ø¹ÙŠØ´Ø© Ø¹ÙˆØ§Ø¬ÙŠ - ÙˆÙƒÙŠÙ„Ø© Ø´Ø¤ÙˆÙ† Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª</p>
</div>
```

  </div>
</div>

<!-- â•â• VIEW MODE OVERLAY â•â• -->

<div id="viewModeOverlay" style="display:none;position:fixed;bottom:0;left:0;right:0;background:linear-gradient(135deg,#f59e0b,#d97706);padding:12px 20px;z-index:100;box-shadow:0 -4px 12px rgba(0,0,0,.1)">
  <div style="display:flex;align-items:center;justify-content:space-between;max-width:1400px;margin:0 auto">
    <div style="display:flex;align-items:center;gap:10px">
      <span style="font-size:20px">ğŸ‘ï¸</span>
      <div>
        <div style="font-size:13px;font-weight:800;color:#fff">ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·</div>
        <div style="font-size:10px;color:rgba(255,255,255,.8)">Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ÙˆØ¶Ø¹</div>
      </div>
    </div>
    <button onclick="logout()" style="padding:8px 16px;background:rgba(255,255,255,.2);border:1px solid rgba(255,255,255,.3);border-radius:8px;color:#fff;font-family:'Cairo',sans-serif;font-size:11px;font-weight:700;cursor:pointer;transition:all .2s"
            onmouseover="this.style.background='rgba(255,255,255,.3)'"
            onmouseout="this.style.background='rgba(255,255,255,.2)'">
      ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬
    </button>
  </div>
</div>

<!-- â•â• OFFICIAL HEADER â•â• -->

<div style="background:#fff;border-bottom:3px solid #14b8a6;padding:24px 32px">
  <div style="display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:30px">

```
<!-- Right: Arabic Header -->
<div style="text-align:right">
  <div style="font-size:16px;font-weight:800;color:#14b8a6;margin-bottom:3px">Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</div>
  <div style="font-size:18px;font-weight:900;color:#1a1a1a;margin-bottom:3px">ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…</div>
  <div style="font-size:14px;font-weight:600;color:#4a6080;margin-bottom:3px">Ø¥Ø¯Ø§Ø±Ø© ØªØ¹Ù„ÙŠÙ… Ø¬Ø§Ø²Ø§Ù†</div>
  <div style="font-size:14px;font-weight:700;color:#0a2463">Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø¨Ø¬Ø§Ø²Ø§Ù†</div>
</div>

<!-- Center: Ministry Logo -->
<div style="text-align:center">
  <img src="ministry-logo.png" 
       alt="ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ… - Ministry of Education" 
       style="width:160px;height:auto;max-height:110px;object-fit:contain"
       onerror="this.style.display='none';this.nextElementSibling.style.display='block'">
  <!-- Fallback SVG if image doesn't load -->
  <div style="display:none;width:160px;height:110px;margin:0 auto;background:linear-gradient(135deg,#14b8a6,#0d9488);border-radius:12px;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:8px">
    <div style="font-size:28px;font-weight:900;color:#fff">ğŸ“</div>
    <div style="font-size:16px;font-weight:800;color:#fff">ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…</div>
    <div style="font-size:11px;font-weight:600;color:rgba(255,255,255,.8)">Ministry of Education</div>
  </div>
</div>

<!-- Left: English Header -->
<div style="text-align:left;direction:ltr">
  <div style="font-size:16px;font-weight:800;color:#14b8a6;margin-bottom:3px">Kingdom of Saudi Arabia</div>
  <div style="font-size:18px;font-weight:900;color:#1a1a1a;margin-bottom:3px">Ministry of Education</div>
  <div style="font-size:14px;font-weight:600;color:#4a6080;margin-bottom:3px">Jazan Education Department</div>
  <div style="font-size:14px;font-weight:700;color:#0a2463">First High School - Jazan</div>
</div>
```

  </div>
</div>

<!-- â•â• HEADER â•â• -->

<div class="header">
  <div class="header-dots"></div>
  <div class="header-inner">
    <div class="header-left">
      <div class="header-badge">ğŸ“‹ Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„ØºÙŠØ§Ø¨</div>
      <div class="header-title">Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„ØºÙŠØ§Ø¨ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</div>
      <div class="header-sub">Ù…Ø¯ÙŠØ±Ø© Ø§Ù„Ù…Ø¯Ø±Ø³Ø©: Ø£. Ù‡Ø¨Ù‡ ØµÙ… â€¢ Ø§Ù„Ù…Ø´Ø±ÙØ©: Ø£. Ø¹ÙŠØ´Ø© Ø¹ÙˆØ§Ø¬ÙŠ (ÙˆÙƒÙŠÙ„Ø© Ø´Ø¤ÙˆÙ† Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª) â€¢ Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØªØµÙ…ÙŠÙ…: Ø£. Ù†Ø¹Ù…Ù‡ ÙØ§Ø¦Ø¹ Ø¹Ø³ÙŠØ±ÙŠ â€¢ Ø§Ù„Ø¹Ø§Ù… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ 1447-1448 Ù‡Ù€</div>
    </div>
    <div class="header-right">
      <div id="headerStats"></div>
      <div class="user-badge">
        <div class="user-avatar">Ù†</div>
        <div>
          <div class="user-name">Ù†Ø¹Ù…Ù‡ ÙØ§Ø¦Ø¹ Ø¹Ø³ÙŠØ±ÙŠ</div>
          <div class="user-role">Ù…Ø¹Ù„Ù…Ø© Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- â•â• TABS â•â• -->

<div class="tabs-bar">
  <button class="tab-btn active" onclick="showTab('register')">ğŸ“‹ Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±</button>
  <button class="tab-btn" onclick="showTab('students')">ğŸ‘©â€ğŸ“ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª</button>
  <button class="tab-btn" onclick="showTab('reports')">ğŸ“Š Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ©</button>
  <button class="tab-btn" onclick="showTab('certificates')">ğŸ† Ø´Ù‡Ø§Ø¯Ø§Øª Ø§Ù„Ø´ÙƒØ±</button>
  <button class="tab-btn" onclick="showTab('letters')">âœ‰ï¸ Ø®Ø·Ø§Ø¨Ø§Øª Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø§Ù„Ø£Ù…ÙˆØ±</button>
  <button class="tab-btn" onclick="showTab('admin')">ğŸ‘¥ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB: REGISTER â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<div id="tab-register" class="page active">
  <h2 style="font-size:22px;font-weight:900;color:var(--navy);margin-bottom:20px">
    ğŸ“‹ Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„ØºÙŠØ§Ø¨ - Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ (29 Ø±Ø¬Ø¨ 1448 Ù‡Ù€)
  </h2>

  <!-- Controls -->

  <div style="background:#fff;padding:16px 20px;border-radius:12px;border:1px solid var(--gray-200);margin-bottom:20px;display:flex;gap:12px;align-items:center;flex-wrap:wrap">
    <div style="display:flex;align-items:center;gap:8px">
      <span style="font-size:11px;font-weight:700;color:var(--gray-600)">Ø§Ù„ØµÙ:</span>
      <select class="form-select" id="registerGrade" onchange="updateAttendanceTable()">
        <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙÙˆÙ</option>
        <option value="first">Ø§Ù„Ø£ÙˆÙ„ Ø«Ø§Ù†ÙˆÙŠ</option>
        <option value="second">Ø§Ù„Ø«Ø§Ù†ÙŠ Ø«Ø§Ù†ÙˆÙŠ</option>
        <option value="third">Ø§Ù„Ø«Ø§Ù„Ø« Ø«Ø§Ù†ÙˆÙŠ</option>
      </select>
    </div>
    <div style="display:flex;align-items:center;gap:8px">
      <span style="font-size:11px;font-weight:700;color:var(--gray-600)">Ø§Ù„Ø´Ø¹Ø¨Ø©:</span>
      <select class="form-select" id="registerSection" onchange="updateAttendanceTable()">
        <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø¹Ø¨</option>
        <option value="Ù¡">Ø´Ø¹Ø¨Ø© Ù¡</option>
        <option value="Ù¢">Ø´Ø¹Ø¨Ø© Ù¢</option>
        <option value="Ù£">Ø´Ø¹Ø¨Ø© Ù£</option>
        <option value="Ù¤">Ø´Ø¹Ø¨Ø© Ù¤</option>
        <option value="Ù¥">Ø´Ø¹Ø¨Ø© Ù¥</option>
      </select>
    </div>
    <div style="margin-right:auto;display:flex;gap:8px">
      <button class="btn btn-outline" onclick="updateAttendanceTable()">ğŸ”„ ØªØ­Ø¯ÙŠØ«</button>
      <button class="btn btn-primary" onclick="exportAttendanceExcel()">ğŸ“¥ ØªØµØ¯ÙŠØ± Excel</button>
    </div>
  </div>

  <!-- Attendance Table -->

  <div id="attendanceTableContainer"></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB: STUDENT MANAGER â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<div id="tab-students" class="page">
  <h2 style="font-size:22px;font-weight:900;color:var(--navy);margin-bottom:20px">
    ğŸ‘©â€ğŸ“ Ø¥Ø¯Ø§Ø±Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª
  </h2>

  <div class="counter">
    <div class="counter-num" id="studentCount">0</div>
    <div class="counter-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø³Ø¬Ù„Ø§Øª</div>
  </div>

  <div class="mgr-grid">
    <!-- Add Single Student -->
    <div class="mgr-card">
      <div class="mgr-card-title">â• Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©</div>
      <div class="form-grid">
        <div class="form-group" style="grid-column:1/-1">
          <label class="form-label">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø© Ø§Ù„ÙƒØ§Ù…Ù„</label>
          <input type="text" class="form-input" id="studentName" placeholder="Ù…Ø«Ø§Ù„: Ø³Ø§Ø±Ø© Ø£Ø­Ù…Ø¯ Ø§Ù„Ù…Ø§Ù„ÙƒÙŠ"/>
        </div>
        <div class="form-group">
          <label class="form-label">Ø§Ù„ØµÙ</label>
          <select class="form-select" id="studentGrade">
            <option value="first">Ø§Ù„Ø£ÙˆÙ„ Ø«Ø§Ù†ÙˆÙŠ</option>
            <option value="second">Ø§Ù„Ø«Ø§Ù†ÙŠ Ø«Ø§Ù†ÙˆÙŠ</option>
            <option value="third">Ø§Ù„Ø«Ø§Ù„Ø« Ø«Ø§Ù†ÙˆÙŠ</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Ø§Ù„Ø´Ø¹Ø¨Ø©</label>
          <select class="form-select" id="studentSection">
            <option value="Ù¡">Ø´Ø¹Ø¨Ø© Ù¡</option>
            <option value="Ù¢">Ø´Ø¹Ø¨Ø© Ù¢</option>
            <option value="Ù£">Ø´Ø¹Ø¨Ø© Ù£</option>
            <option value="Ù¤">Ø´Ø¹Ø¨Ø© Ù¤</option>
            <option value="Ù¥">Ø´Ø¹Ø¨Ø© Ù¥</option>
          </select>
        </div>
      </div>
      <div style="display:flex;gap:10px;margin-top:12px">
        <button class="btn btn-primary" onclick="addStudent()">â• Ø¥Ø¶Ø§ÙØ©</button>
        <button class="btn btn-outline" onclick="clearForm()">ğŸ”„ Ù…Ø³Ø­</button>
      </div>
    </div>

```
<!-- Import Bulk -->
<div class="mgr-card">
  <div class="mgr-card-title">ğŸ“¥ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¹Ø¯Ø© Ø·Ø§Ù„Ø¨Ø§Øª</div>
  <div class="import-area">
    <div style="font-size:11px;color:var(--gray-600);margin-bottom:8px">
      Ø§Ù„ØµÙ‚ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª (Ø§Ø³Ù… ÙˆØ§Ø­Ø¯ ÙÙŠ ÙƒÙ„ Ø³Ø·Ø±)
    </div>
    <textarea id="bulkImport" placeholder="Ø³Ø§Ø±Ø© Ø£Ø­Ù…Ø¯ Ø§Ù„Ù…Ø§Ù„ÙƒÙŠ&#10;Ù†ÙˆØ±Ø§ Ø®Ø§Ù„Ø¯ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ&#10;Ø±ÙŠÙ… Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¯ÙˆØ³Ø±ÙŠ"></textarea>
  </div>
  <div style="display:flex;gap:10px;align-items:center">
    <select class="form-select" id="bulkGrade" style="flex:1">
      <option value="first">Ø§Ù„Ø£ÙˆÙ„ Ø«Ø§Ù†ÙˆÙŠ</option>
      <option value="second">Ø§Ù„Ø«Ø§Ù†ÙŠ Ø«Ø§Ù†ÙˆÙŠ</option>
      <option value="third">Ø§Ù„Ø«Ø§Ù„Ø« Ø«Ø§Ù†ÙˆÙŠ</option>
    </select>
    <select class="form-select" id="bulkSection" style="width:100px">
      <option value="Ù¡">Ø´Ø¹Ø¨Ø© Ù¡</option>
      <option value="Ù¢">Ø´Ø¹Ø¨Ø© Ù¢</option>
      <option value="Ù£">Ø´Ø¹Ø¨Ø© Ù£</option>
      <option value="Ù¤">Ø´Ø¹Ø¨Ø© Ù¤</option>
      <option value="Ù¥">Ø´Ø¹Ø¨Ø© Ù¥</option>
    </select>
    <button class="btn btn-primary" onclick="importBulk()">ğŸ“¥ Ø§Ø³ØªÙŠØ±Ø§Ø¯</button>
  </div>
</div>
```

  </div>

  <!-- Students List -->

  <div class="mgr-card">
    <div class="mgr-card-title" style="justify-content:space-between">
      <span>ğŸ‘¥ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø³Ø¬Ù„Ø§Øª</span>
      <div style="display:flex;gap:8px">
        <button class="btn btn-outline" onclick="clearAll()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
        <button class="btn btn-success" onclick="applyToSystem()">âœ… ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¸Ø§Ù…</button>
      </div>
    </div>
    <div class="students-list" id="studentsList"></div>
  </div>

  <!-- Export Code (Hidden by default) -->

  <div class="mgr-card" style="display:none">
    <div class="mgr-card-title" style="justify-content:space-between">
      <span>ğŸ’» ÙƒÙˆØ¯ Ø§Ù„ØªØµØ¯ÙŠØ±</span>
      <button class="btn btn-primary" onclick="copyCode()">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯</button>
    </div>
    <div class="output-box" id="outputCode">
      <pre id="codeContent">// Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„ÙƒÙˆØ¯ Ù‡Ù†Ø§ Ø¨Ø¹Ø¯ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª</pre>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB: REPORTS â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<div id="tab-reports" class="page">
  <h2 style="font-size:22px;font-weight:900;color:var(--navy);margin-bottom:20px">
    ğŸ“Š Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ©
  </h2>

  <!-- Report Type Selection -->

  <div style="background:#fff;padding:20px;border-radius:12px;border:1px solid var(--gray-200);margin-bottom:20px">
    <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px">
      <button class="btn btn-primary" onclick="generateDailyReport()" style="padding:14px">
        ğŸ“… ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ…ÙŠ
      </button>
      <button class="btn btn-primary" onclick="generateWeeklyReport()" style="padding:14px">
        ğŸ“† ØªÙ‚Ø±ÙŠØ± Ø£Ø³Ø¨ÙˆØ¹ÙŠ
      </button>
      <button class="btn btn-primary" onclick="generateMonthlyReport()" style="padding:14px">
        ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø´Ù‡Ø±ÙŠ
      </button>
    </div>
  </div>

  <!-- Report Content -->

  <div id="reportContent" style="display:none">
    <!-- Report Header -->
    <div style="background:#fff;padding:24px;border-radius:12px;border:1px solid var(--gray-200);margin-bottom:20px;box-shadow:var(--shadow-sm)">
      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:20px">
        <div>
          <h3 style="font-size:18px;font-weight:800;color:var(--navy);margin-bottom:4px" id="reportTitle">ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø­Ø¶ÙˆØ±</h3>
          <p style="font-size:12px;color:var(--gray-600)" id="reportDate"></p>
        </div>
        <div style="display:flex;gap:8px">
          <button class="btn btn-outline" onclick="printReport()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
          <button class="btn btn-success" onclick="exportReportPDF()">ğŸ“„ PDF</button>
          <button class="btn btn-primary" onclick="exportReportExcel()">ğŸ“Š Excel</button>
        </div>
      </div>

```
  <!-- Summary Stats -->
  <div style="display:grid;grid-template-columns:repeat(5,1fr);gap:12px" id="reportStats"></div>
</div>

<!-- Charts Section -->
<div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px">
  <!-- Pie Chart -->
  <div style="background:#fff;padding:24px;border-radius:12px;border:1px solid var(--gray-200);box-shadow:var(--shadow-sm)">
    <h4 style="font-size:14px;font-weight:800;color:var(--navy);margin-bottom:16px">ğŸ“Š ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„ØºÙŠØ§Ø¨</h4>
    <canvas id="pieChart" style="max-height:250px"></canvas>
  </div>
  
  <!-- Bar Chart -->
  <div style="background:#fff;padding:24px;border-radius:12px;border:1px solid var(--gray-200);box-shadow:var(--shadow-sm)">
    <h4 style="font-size:14px;font-weight:800;color:var(--navy);margin-bottom:16px">ğŸ“ˆ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…Ù‚Ø§Ø±Ù†Ø©</h4>
    <canvas id="barChart" style="max-height:250px"></canvas>
  </div>
</div>

<!-- Detailed Table -->
<div style="background:#fff;padding:24px;border-radius:12px;border:1px solid var(--gray-200);box-shadow:var(--shadow-sm)">
  <h4 style="font-size:14px;font-weight:800;color:var(--navy);margin-bottom:16px">ğŸ“‹ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„Ø©</h4>
  <div id="reportTable" style="overflow-x:auto"></div>
</div>
```

  </div>

  <!-- Empty State -->

  <div id="reportsEmptyState" style="background:#fff;padding:60px;border-radius:16px;border:1px solid var(--gray-200);text-align:center">
    <div style="font-size:64px;margin-bottom:16px">ğŸ“Š</div>
    <div style="font-size:18px;font-weight:700;color:var(--navy);margin-bottom:8px">
      Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ© Ø§Ù„Ø´Ø§Ù…Ù„Ø©
    </div>
    <div style="font-size:13px;color:var(--gray-600);margin-bottom:20px">
      Ø§Ø®ØªØ§Ø±ÙŠ Ù†ÙˆØ¹ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆØ§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ©
    </div>
    <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
      <div style="background:var(--blue-xs);padding:16px;border-radius:10px;min-width:200px">
        <div style="font-size:12px;color:var(--gray-600);margin-bottom:4px">ğŸ“… ÙŠÙˆÙ…ÙŠ</div>
        <div style="font-size:11px;color:var(--gray-600)">ØªÙ‚Ø±ÙŠØ± Ø­Ø¶ÙˆØ± Ø§Ù„ÙŠÙˆÙ…</div>
      </div>
      <div style="background:var(--present-lt);padding:16px;border-radius:10px;min-width:200px">
        <div style="font-size:12px;color:var(--gray-600);margin-bottom:4px">ğŸ“† Ø£Ø³Ø¨ÙˆØ¹ÙŠ</div>
        <div style="font-size:11px;color:var(--gray-600)">ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
      </div>
      <div style="background:var(--excused-lt);padding:16px;border-radius:10px;min-width:200px">
        <div style="font-size:12px;color:var(--gray-600);margin-bottom:4px">ğŸ“Š Ø´Ù‡Ø±ÙŠ</div>
        <div style="font-size:11px;color:var(--gray-600)">ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø´Ù‡Ø± Ø§Ù„ÙƒØ§Ù…Ù„</div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB: CERTIFICATES â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<div id="tab-certificates" class="page">
  <h2 style="font-size:22px;font-weight:900;color:var(--navy);margin-bottom:20px">
    ğŸ† Ø´Ù‡Ø§Ø¯Ø§Øª Ø§Ù„Ø´ÙƒØ± ÙˆØ§Ù„ØªÙ‚Ø¯ÙŠØ±
  </h2>

  <!-- Stats -->

  <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:24px">
    <div style="background:#fff;border-radius:var(--radius);padding:20px;border:1px solid var(--gray-200);text-align:center">
      <div style="font-size:36px;font-weight:900;color:var(--present);margin-bottom:4px" id="perfectAttendanceCount">0</div>
      <div style="font-size:12px;color:var(--gray-600);font-weight:600">Ø·Ø§Ù„Ø¨Ø§Øª Ø¨Ø¯ÙˆÙ† ØºÙŠØ§Ø¨</div>
    </div>
    <div style="background:#fff;border-radius:var(--radius);padding:20px;border:1px solid var(--gray-200);text-align:center">
      <div style="font-size:36px;font-weight:900;color:var(--blue);margin-bottom:4px" id="excellentAttendanceCount">0</div>
      <div style="font-size:12px;color:var(--gray-600);font-weight:600">Ø­Ø¶ÙˆØ± Ù…Ù…ØªØ§Ø² (95%+)</div>
    </div>
    <div style="background:#fff;border-radius:var(--radius);padding:20px;border:1px solid var(--gray-200);text-align:center">
      <div style="font-size:36px;font-weight:900;color:var(--excused);margin-bottom:4px" id="goodAttendanceCount">0</div>
      <div style="font-size:12px;color:var(--gray-600);font-weight:600">Ø­Ø¶ÙˆØ± Ø¬ÙŠØ¯ (90%+)</div>
    </div>
  </div>

  <!-- Certificates Grid -->

  <div style="background:#fff;border-radius:var(--radius);padding:24px;border:1px solid var(--gray-200);box-shadow:var(--shadow-sm);margin-bottom:24px">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:20px">
      <h3 style="font-size:16px;font-weight:800;color:var(--navy);display:flex;align-items:center;gap:10px">
        <span style="background:var(--present-lt);width:32px;height:32px;border-radius:10px;display:inline-flex;align-items:center;justify-content:center;font-size:16px">ğŸ†</span>
        Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø§Øª Ù„Ø´Ù‡Ø§Ø¯Ø§Øª Ø§Ù„Ø´ÙƒØ±
      </h3>
      <div style="display:flex;gap:8px">
        <button class="btn btn-outline" onclick="printAllCertificates()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙƒÙ„</button>
        <button class="btn btn-primary" onclick="generateCertificates()">ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
      </div>
    </div>
    <div id="certificatesGrid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px"></div>
  </div>
</div>

<!-- Certificate Print Modal -->

<div id="certificateModal" style="display:none;position:fixed;inset:0;background:rgba(10,36,99,.85);backdrop-filter:blur(8px);z-index:9999;overflow-y:auto;padding:20px">
  <div style="max-width:210mm;margin:0 auto;position:relative">
    <div style="position:sticky;top:20px;background:#fff;padding:12px;border-radius:12px;margin-bottom:20px;display:flex;gap:10px;justify-content:flex-end;z-index:10;box-shadow:var(--shadow-md)">
      <button class="btn btn-outline" onclick="closeCertificate()">âœ– Ø¥ØºÙ„Ø§Ù‚</button>
      <button class="btn btn-primary" onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
    </div>
    <div id="certificateContent" style="background:#fff;border-radius:16px;overflow:hidden;box-shadow:var(--shadow-lg)"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB: LETTERS â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<div id="tab-letters" class="page">
  <h2 style="font-size:22px;font-weight:900;color:var(--navy);margin-bottom:20px">
    âœ‰ï¸ Ø®Ø·Ø§Ø¨Ø§Øª Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø§Ù„Ø£Ù…ÙˆØ±
  </h2>
  <div style="background:#fff;padding:40px;border-radius:16px;border:1px solid var(--gray-200);text-align:center">
    <div style="font-size:48px;margin-bottom:16px">âœ‰ï¸</div>
    <div style="font-size:18px;font-weight:700;color:var(--navy);margin-bottom:8px">
      Ø®Ø·Ø§Ø¨Ø§Øª Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø§Ù„Ø£Ù…ÙˆØ±
    </div>
    <div style="font-size:13px;color:var(--gray-600)">
      Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø®Ø·Ø§Ø¨Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„Ù„Ø·Ø§Ù„Ø¨Ø§Øª Ø§Ù„Ù„ÙŠ Ø¹Ù†Ø¯Ù‡Ù† 3 Ø£ÙŠØ§Ù… ØºÙŠØ§Ø¨ Ø¨Ø¯ÙˆÙ† Ø¹Ø°Ø±
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB: ADMIN â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<div id="tab-admin" class="page">
  <h2 style="font-size:22px;font-weight:900;color:var(--navy);margin-bottom:20px">
    ğŸ‘¥ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø´Ø±ÙØ©
  </h2>

  <!-- KPIs -->

  <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:24px">
    <div style="background:#fff;border-radius:var(--radius);padding:20px;border:1px solid var(--gray-200);text-align:center">
      <div style="font-size:36px;font-weight:900;color:var(--blue);margin-bottom:4px">7</div>
      <div style="font-size:12px;color:var(--gray-600);font-weight:600">Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„ÙØ±ÙŠÙ‚</div>
    </div>
    <div style="background:#fff;border-radius:var(--radius);padding:20px;border:1px solid var(--gray-200);text-align:center">
      <div style="font-size:36px;font-weight:900;color:var(--present);margin-bottom:4px" id="onlineCount">-</div>
      <div style="font-size:12px;color:var(--gray-600);font-weight:600">Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†</div>
    </div>
    <div style="background:#fff;border-radius:var(--radius);padding:20px;border:1px solid var(--gray-200);text-align:center">
      <div style="font-size:36px;font-weight:900;color:var(--excused);margin-bottom:4px">0</div>
      <div style="font-size:12px;color:var(--gray-600);font-weight:600">Ø¥Ø¯Ø®Ø§Ù„Ø§Øª Ø§Ù„ÙŠÙˆÙ…</div>
    </div>
    <div style="background:#fff;border-radius:var(--radius);padding:20px;border:1px solid var(--gray-200);text-align:center">
      <div style="font-size:36px;font-weight:900;color:var(--late);margin-bottom:4px">0</div>
      <div style="font-size:12px;color:var(--gray-600);font-weight:600">Ø®Ø·Ø§Ø¨Ø§Øª Ù…Ø¹Ù„Ù‚Ø©</div>
    </div>
  </div>

  <!-- Team Members -->

  <div style="background:#fff;border-radius:var(--radius);padding:24px;border:1px solid var(--gray-200);box-shadow:var(--shadow-sm);margin-bottom:24px">
    <h3 style="font-size:16px;font-weight:800;color:var(--navy);margin-bottom:20px;display:flex;align-items:center;gap:10px">
      <span style="background:var(--blue-lt);width:32px;height:32px;border-radius:10px;display:inline-flex;align-items:center;justify-content:center;font-size:16px">ğŸ‘¥</span>
      Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„ÙØ±ÙŠÙ‚ ÙˆØµÙ„Ø§Ø­ÙŠØ§ØªÙ‡Ù…
    </h3>
    <div id="teamMembersList" style="display:grid;gap:12px"></div>
  </div>

  <!-- Access Log -->

  <div style="background:#fff;border-radius:var(--radius);padding:24px;border:1px solid var(--gray-200);box-shadow:var(--shadow-sm)">
    <h3 style="font-size:16px;font-weight:800;color:var(--navy);margin-bottom:20px;display:flex;align-items:center;gap:10px">
      <span style="background:var(--present-lt);width:32px;height:32px;border-radius:10px;display:inline-flex;align-items:center;justify-content:center;font-size:16px">ğŸ“Š</span>
      Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ù†Ø´Ø§Ø·Ø§Øª
    </h3>
    <div style="max-height:300px;overflow-y:auto">
      <div style="text-align:center;padding:40px;color:var(--gray-400)">
        <div style="font-size:48px;margin-bottom:12px">ğŸ“‹</div>
        <div style="font-size:14px;font-weight:600">Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª Ù‡Ù†Ø§</div>
        <div style="font-size:12px;margin-top:6px">Ø¬Ù…ÙŠØ¹ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙˆØ§Ù„Ø­Ø°Ù</div>
      </div>
    </div>
  </div>
</div>

<!-- â•â• FOOTER â•â• -->

<div style="background:#fff;border-top:2px solid var(--gray-200);padding:24px 32px;margin-top:40px">
  <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-bottom:20px">

```
<!-- Principal -->
<div style="text-align:center;padding:16px;background:var(--gray-50);border-radius:12px">
  <div style="width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,#ec4899,#db2777);display:flex;align-items:center;justify-content:center;color:#fff;font-size:24px;font-weight:800;margin:0 auto 12px">Ù‡</div>
  <div style="font-size:13px;font-weight:700;color:var(--navy);margin-bottom:4px">Ù…Ø¯ÙŠØ±Ø© Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</div>
  <div style="font-size:14px;font-weight:800;color:var(--gray-800)">Ø£. Ù‡Ø¨Ù‡ ØµÙ…</div>
</div>

<!-- Supervisor -->
<div style="text-align:center;padding:16px;background:var(--gray-50);border-radius:12px">
  <div style="width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,#8b5cf6,#7c3aed);display:flex;align-items:center;justify-content:center;color:#fff;font-size:24px;font-weight:800;margin:0 auto 12px">Ø¹</div>
  <div style="font-size:13px;font-weight:700;color:var(--navy);margin-bottom:4px">Ø§Ù„Ù…Ø´Ø±ÙØ©</div>
  <div style="font-size:14px;font-weight:800;color:var(--gray-800);margin-bottom:2px">Ø£. Ø¹ÙŠØ´Ø© Ø¹ÙˆØ§Ø¬ÙŠ</div>
  <div style="font-size:11px;color:var(--gray-600)">ÙˆÙƒÙŠÙ„Ø© Ø´Ø¤ÙˆÙ† Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª</div>
</div>

<!-- Designer -->
<div style="text-align:center;padding:16px;background:var(--gray-50);border-radius:12px">
  <div style="width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,var(--blue),var(--navy));display:flex;align-items:center;justify-content:center;color:#fff;font-size:24px;font-weight:800;margin:0 auto 12px">Ù†</div>
  <div style="font-size:13px;font-weight:700;color:var(--navy);margin-bottom:4px">Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØªØµÙ…ÙŠÙ…</div>
  <div style="font-size:14px;font-weight:800;color:var(--gray-800);margin-bottom:2px">Ø£. Ù†Ø¹Ù…Ù‡ ÙØ§Ø¦Ø¹ Ø¹Ø³ÙŠØ±ÙŠ</div>
  <div style="font-size:11px;color:var(--gray-600)">Ù…Ø¹Ù„Ù…Ø© Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</div>
</div>
```

  </div>

  <div style="text-align:center;padding-top:16px;border-top:1px solid var(--gray-200)">
    <div style="font-size:13px;font-weight:700;color:var(--navy);margin-bottom:4px">Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø¨Ø¬Ø§Ø²Ø§Ù†</div>
    <div style="font-size:12px;color:var(--gray-600)">Ø¥Ø¯Ø§Ø±Ø© ØªØ¹Ù„ÙŠÙ… Ø¬Ø§Ø²Ø§Ù† â€¢ ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ… â€¢ Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</div>
    <div style="font-size:11px;color:var(--gray-400);margin-top:6px">Ø§Ù„Ø¹Ø§Ù… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ 1447-1448 Ù‡Ù€ (2025-2026 Ù…)</div>
  </div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  AUTHENTICATION & ACCESS CONTROL SYSTEM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const ADMIN_PASSWORDS = {
  '2024': {name: 'Ù†Ø¹Ù…Ù‡ ÙØ§Ø¦Ø¹ Ø¹Ø³ÙŠØ±ÙŠ', role: 'Ù…Ø¹Ù„Ù…Ø© Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©'},
  '1448': {name: 'Ø¹ÙŠØ´Ø© Ø¹ÙˆØ§Ø¬ÙŠ', role: 'ÙˆÙƒÙŠÙ„Ø© Ø´Ø¤ÙˆÙ† Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª'},
  '0000': {name: 'Ù‡Ø¨Ù‡ ØµÙ…', role: 'Ù…Ø¯ÙŠØ±Ø© Ø§Ù„Ù…Ø¯Ø±Ø³Ø©'},
  '1111': {name: 'Ø³Ø§Ø±Ø© Ø£Ø­Ù…Ø¯ Ø§Ù„Ù‚Ø­Ø·Ø§Ù†ÙŠ', role: 'Ù…Ø¹Ù„Ù…Ø©'},
  '2222': {name: 'Ù†ÙˆØ±Ø§ Ø®Ø§Ù„Ø¯ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ', role: 'Ù…Ø¹Ù„Ù…Ø©'},
  '3333': {name: 'Ø±ÙŠÙ… Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¯ÙˆØ³Ø±ÙŠ', role: 'Ù…Ø¹Ù„Ù…Ø©'},
  '4444': {name: 'Ù…Ù†Ù‰ Ø³Ø§Ù„Ù… Ø§Ù„Ø´Ù‡Ø±Ø§Ù†ÙŠ', role: 'Ù…Ø¹Ù„Ù…Ø©'}
};

let currentUser = null;
let isViewOnly = false;

function attemptLogin() {
  const password = document.getElementById('passwordInput').value.trim();
  const errorDiv = document.getElementById('loginError');
  
  if (!password) {
    showLoginError('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ');
    return;
  }
  
  if (ADMIN_PASSWORDS[password]) {
    currentUser = ADMIN_PASSWORDS[password];
    isViewOnly = false;
    
    // Update UI
    document.getElementById('loginModal').style.display = 'none';
    document.getElementById('viewModeOverlay').style.display = 'none';
    
    // Update user badge
    const initials = currentUser.name.split(' ').slice(0,2).map(w=>w[0]).join('');
    document.querySelector('.user-avatar').textContent = initials;
    document.querySelector('.user-name').textContent = currentUser.name;
    document.querySelector('.user-role').textContent = currentUser.role;
    
    showToast(`âœ… Ù…Ø±Ø­Ø¨Ø§Ù‹ ${currentUser.name}`);
    enableEditMode();
  } else {
    showLoginError('âŒ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­');
    document.getElementById('passwordInput').value = '';
    document.getElementById('passwordInput').focus();
  }
}

function enterViewMode() {
  isViewOnly = true;
  currentUser = {name: 'Ø²Ø§Ø¦Ø±', role: 'Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·'};
  
  document.getElementById('loginModal').style.display = 'none';
  document.getElementById('viewModeOverlay').style.display = 'block';
  
  showToast('ğŸ‘ï¸ Ø¯Ø®Ù„ØªÙ ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·');
  disableEditMode();
}

function logout() {
  if (confirm('Ù‡Ù„ Ø£Ù†ØªÙ Ù…ØªØ£ÙƒØ¯Ø© Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')) {
    currentUser = null;
    isViewOnly = false;
    document.getElementById('loginModal').style.display = 'flex';
    document.getElementById('viewModeOverlay').style.display = 'none';
    document.getElementById('passwordInput').value = '';
    showToast('ğŸšª ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­');
  }
}

function showLoginError(message) {
  const errorDiv = document.getElementById('loginError');
  errorDiv.textContent = message;
  errorDiv.style.display = 'block';
  setTimeout(() => {
    errorDiv.style.display = 'none';
  }, 3000);
}

function enableEditMode() {
  // Enable all buttons and inputs
  document.querySelectorAll('.btn, .form-input, .form-select, .att-cell, .btn-icon').forEach(el => {
    el.disabled = false;
    el.style.opacity = '1';
    el.style.cursor = 'pointer';
  });
}

function disableEditMode() {
  // Disable all edit buttons and inputs
  document.querySelectorAll('.btn-primary, .btn-success, .btn-danger, .form-input, .form-select, .att-cell, .btn-icon, .btn-delete, .btn-edit').forEach(el => {
    el.disabled = true;
    el.style.opacity = '0.5';
    el.style.cursor = 'not-allowed';
  });
  
  // Add click prevention
  document.addEventListener('click', preventEditInViewMode, true);
}

function preventEditInViewMode(e) {
  if (isViewOnly && (
    e.target.classList.contains('btn-primary') ||
    e.target.classList.contains('btn-success') ||
    e.target.classList.contains('btn-danger') ||
    e.target.classList.contains('att-cell') ||
    e.target.classList.contains('btn-icon') ||
    e.target.tagName === 'INPUT' ||
    e.target.tagName === 'SELECT' ||
    e.target.tagName === 'TEXTAREA'
  )) {
    e.preventDefault();
    e.stopPropagation();
    showToast('âš ï¸ ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø· - Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„');
    return false;
  }
}

// Check authentication on page load
window.addEventListener('load', () => {
  // Show login modal on page load
  document.getElementById('loginModal').style.display = 'flex';
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ATTENDANCE REGISTER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const ACADEMIC_DAYS = [
  // Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø£ÙˆÙ„: 29 Ø±Ø¬Ø¨ - 3 Ø´Ø¹Ø¨Ø§Ù† (27-31 ÙŠÙ†Ø§ÙŠØ± 2026)
  {date:'29/7',day:'Ø§Ù„Ø£Ø­Ø¯',hijri:'29 Ø±Ø¬Ø¨',week:1},
  {date:'30/7',day:'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†',hijri:'30 Ø±Ø¬Ø¨',week:1},
  {date:'1/8',day:'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡',hijri:'1 Ø´Ø¹Ø¨Ø§Ù†',week:1},
  {date:'2/8',day:'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡',hijri:'2 Ø´Ø¹Ø¨Ø§Ù†',week:1},
  {date:'3/8',day:'Ø§Ù„Ø®Ù…ÙŠØ³',hijri:'3 Ø´Ø¹Ø¨Ø§Ù†',week:1},
  
  // Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù†ÙŠ: 7-11 Ø´Ø¹Ø¨Ø§Ù† (3-7 ÙØ¨Ø±Ø§ÙŠØ±)
  {date:'7/8',day:'Ø§Ù„Ø£Ø­Ø¯',hijri:'7 Ø´Ø¹Ø¨Ø§Ù†',week:2},
  {date:'8/8',day:'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†',hijri:'8 Ø´Ø¹Ø¨Ø§Ù†',week:2},
  {date:'9/8',day:'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡',hijri:'9 Ø´Ø¹Ø¨Ø§Ù†',week:2},
  {date:'10/8',day:'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡',hijri:'10 Ø´Ø¹Ø¨Ø§Ù†',week:2},
  {date:'11/8',day:'Ø§Ù„Ø®Ù…ÙŠØ³',hijri:'11 Ø´Ø¹Ø¨Ø§Ù†',week:2},
  
  // Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù„Ø«: 14-18 Ø´Ø¹Ø¨Ø§Ù† (10-14 ÙØ¨Ø±Ø§ÙŠØ±)
  {date:'14/8',day:'Ø§Ù„Ø£Ø­Ø¯',hijri:'14 Ø´Ø¹Ø¨Ø§Ù†',week:3},
  {date:'15/8',day:'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†',hijri:'15 Ø´Ø¹Ø¨Ø§Ù†',week:3},
  {date:'16/8',day:'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡',hijri:'16 Ø´Ø¹Ø¨Ø§Ù†',week:3},
  {date:'17/8',day:'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡',hijri:'17 Ø´Ø¹Ø¨Ø§Ù†',week:3},
  {date:'18/8',day:'Ø§Ù„Ø®Ù…ÙŠØ³',hijri:'18 Ø´Ø¹Ø¨Ø§Ù†',week:3},
  
  // Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø±Ø§Ø¨Ø¹: 21-25 Ø´Ø¹Ø¨Ø§Ù† (17-21 ÙØ¨Ø±Ø§ÙŠØ±)
  {date:'21/8',day:'Ø§Ù„Ø£Ø­Ø¯',hijri:'21 Ø´Ø¹Ø¨Ø§Ù†',week:4},
  {date:'22/8',day:'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†',hijri:'22 Ø´Ø¹Ø¨Ø§Ù†',week:4},
  {date:'23/8',day:'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡',hijri:'23 Ø´Ø¹Ø¨Ø§Ù†',week:4},
  {date:'24/8',day:'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡',hijri:'24 Ø´Ø¹Ø¨Ø§Ù†',week:4},
  {date:'25/8',day:'Ø§Ù„Ø®Ù…ÙŠØ³',hijri:'25 Ø´Ø¹Ø¨Ø§Ù†',week:4},
  
  // Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø³: 28 Ø´Ø¹Ø¨Ø§Ù† - 3 Ø±Ù…Ø¶Ø§Ù† (24-28 ÙØ¨Ø±Ø§ÙŠØ±)
  {date:'28/8',day:'Ø§Ù„Ø£Ø­Ø¯',hijri:'28 Ø´Ø¹Ø¨Ø§Ù†',week:5},
  {date:'29/8',day:'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†',hijri:'29 Ø´Ø¹Ø¨Ø§Ù†',week:5},
  {date:'1/9',day:'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡',hijri:'1 Ø±Ù…Ø¶Ø§Ù†',week:5},
  {date:'2/9',day:'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡',hijri:'2 Ø±Ù…Ø¶Ø§Ù†',week:5},
  {date:'3/9',day:'Ø§Ù„Ø®Ù…ÙŠØ³',hijri:'3 Ø±Ù…Ø¶Ø§Ù†',week:5},
  
  // Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø³Ø§Ø¯Ø³: 6-10 Ø±Ù…Ø¶Ø§Ù† (3-7 Ù…Ø§Ø±Ø³)
  {date:'6/9',day:'Ø§Ù„Ø£Ø­Ø¯',hijri:'6 Ø±Ù…Ø¶Ø§Ù†',week:6},
  {date:'7/9',day:'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†',hijri:'7 Ø±Ù…Ø¶Ø§Ù†',week:6},
  {date:'8/9',day:'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡',hijri:'8 Ø±Ù…Ø¶Ø§Ù†',week:6},
  {date:'9/9',day:'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡',hijri:'9 Ø±Ù…Ø¶Ø§Ù†',week:6},
  {date:'10/9',day:'Ø§Ù„Ø®Ù…ÙŠØ³',hijri:'10 Ø±Ù…Ø¶Ø§Ù†',week:6},
  
  // Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø³Ø§Ø¨Ø¹: 13-17 Ø±Ù…Ø¶Ø§Ù† (10-14 Ù…Ø§Ø±Ø³)
  {date:'13/9',day:'Ø§Ù„Ø£Ø­Ø¯',hijri:'13 Ø±Ù…Ø¶Ø§Ù†',week:7},
  {date:'14/9',day:'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†',hijri:'14 Ø±Ù…Ø¶Ø§Ù†',week:7},
  {date:'15/9',day:'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡',hijri:'15 Ø±Ù…Ø¶Ø§Ù†',week:7},
  {date:'16/9',day:'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡',hijri:'16 Ø±Ù…Ø¶Ø§Ù†',week:7},
  {date:'17/9',day:'Ø§Ù„Ø®Ù…ÙŠØ³',hijri:'17 Ø±Ù…Ø¶Ø§Ù†',week:7},
  
  // Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù…Ù†: 20-24 Ø±Ù…Ø¶Ø§Ù† (17-21 Ù…Ø§Ø±Ø³)
  {date:'20/9',day:'Ø§Ù„Ø£Ø­Ø¯',hijri:'20 Ø±Ù…Ø¶Ø§Ù†',week:8},
  {date:'21/9',day:'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†',hijri:'21 Ø±Ù…Ø¶Ø§Ù†',week:8},
  {date:'22/9',day:'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡',hijri:'22 Ø±Ù…Ø¶Ø§Ù†',week:8},
  {date:'23/9',day:'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡',hijri:'23 Ø±Ù…Ø¶Ø§Ù†',week:8},
  {date:'24/9',day:'Ø§Ù„Ø®Ù…ÙŠØ³',hijri:'24 Ø±Ù…Ø¶Ø§Ù†',week:8},
  
  // Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„ØªØ§Ø³Ø¹: 27-30 Ø±Ù…Ø¶Ø§Ù† (24-27 Ù…Ø§Ø±Ø³) - Ø£Ø³Ø¨ÙˆØ¹ Ù‚ØµÙŠØ± Ù‚Ø¨Ù„ Ø¥Ø¬Ø§Ø²Ø© Ø§Ù„Ø¹ÙŠØ¯
  {date:'27/9',day:'Ø§Ù„Ø£Ø­Ø¯',hijri:'27 Ø±Ù…Ø¶Ø§Ù†',week:9},
  {date:'28/9',day:'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†',hijri:'28 Ø±Ù…Ø¶Ø§Ù†',week:9},
  {date:'29/9',day:'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡',hijri:'29 Ø±Ù…Ø¶Ø§Ù†',week:9},
  {date:'30/9',day:'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡',hijri:'30 Ø±Ù…Ø¶Ø§Ù†',week:9},
  
  // â”â”â”â”â”â”â” Ø¥Ø¬Ø§Ø²Ø© Ø¹ÙŠØ¯ Ø§Ù„ÙØ·Ø±: 1-18 Ø´ÙˆØ§Ù„ â”â”â”â”â”â”â”
  
  // Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø¹Ø§Ø´Ø± - Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¹ÙŠØ¯: 19-23 Ø´ÙˆØ§Ù„ (14-18 Ø£Ø¨Ø±ÙŠÙ„)
  {date:'19/10',day:'Ø§Ù„Ø£Ø­Ø¯',hijri:'19 Ø´ÙˆØ§Ù„',week:10},
  {date:'20/10',day:'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†',hijri:'20 Ø´ÙˆØ§Ù„',week:10},
  {date:'21/10',day:'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡',hijri:'21 Ø´ÙˆØ§Ù„',week:10},
  {date:'22/10',day:'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡',hijri:'22 Ø´ÙˆØ§Ù„',week:10},
  {date:'23/10',day:'Ø§Ù„Ø®Ù…ÙŠØ³',hijri:'23 Ø´ÙˆØ§Ù„',week:10},
  
  // Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø­Ø§Ø¯ÙŠ Ø¹Ø´Ø±: 26-30 Ø´ÙˆØ§Ù„ (21-25 Ø£Ø¨Ø±ÙŠÙ„)
  {date:'26/10',day:'Ø§Ù„Ø£Ø­Ø¯',hijri:'26 Ø´ÙˆØ§Ù„',week:11},
  {date:'27/10',day:'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†',hijri:'27 Ø´ÙˆØ§Ù„',week:11},
  {date:'28/10',day:'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡',hijri:'28 Ø´ÙˆØ§Ù„',week:11},
  {date:'29/10',day:'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡',hijri:'29 Ø´ÙˆØ§Ù„',week:11},
  {date:'30/10',day:'Ø§Ù„Ø®Ù…ÙŠØ³',hijri:'30 Ø´ÙˆØ§Ù„',week:11},
  
  // Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¹Ø´Ø±: 3-7 Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø© (28 Ø£Ø¨Ø±ÙŠÙ„ - 2 Ù…Ø§ÙŠÙˆ)
  {date:'3/11',day:'Ø§Ù„Ø£Ø­Ø¯',hijri:'3 Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø©',week:12},
  {date:'4/11',day:'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†',hijri:'4 Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø©',week:12},
  {date:'5/11',day:'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡',hijri:'5 Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø©',week:12},
  {date:'6/11',day:'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡',hijri:'6 Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø©',week:12},
  {date:'7/11',day:'Ø§Ù„Ø®Ù…ÙŠØ³',hijri:'7 Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø©',week:12},
  
  // Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù„Ø« Ø¹Ø´Ø± - Ø§Ù„Ø£Ø®ÙŠØ±: 10-14 Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø© (5-9 Ù…Ø§ÙŠÙˆ)
  {date:'10/11',day:'Ø§Ù„Ø£Ø­Ø¯',hijri:'10 Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø©',week:13},
  {date:'11/11',day:'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†',hijri:'11 Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø©',week:13},
  {date:'12/11',day:'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡',hijri:'12 Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø©',week:13},
  {date:'13/11',day:'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡',hijri:'13 Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø©',week:13},
  {date:'14/11',day:'Ø§Ù„Ø®Ù…ÙŠØ³',hijri:'14 Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø©',week:13}
  
  // Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ: 14 Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø© 1448 Ù‡Ù€
  // Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø£ØµÙ„ÙŠ ÙŠÙ†ØªÙ‡ÙŠ ÙÙŠ 5 Ø´ÙˆØ§Ù„ØŒ Ù„ÙƒÙ† ØªÙ… Ø§Ù„ØªÙ…Ø¯ÙŠØ¯ Ø­Ø³Ø¨ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ 1 Ø´ÙˆØ§Ù„
  // (ØªÙ… ØªØ¹Ø¯ÙŠÙ„Ù‡ Ù„ÙŠÙƒÙˆÙ† 14 Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø© Ù„ÙŠØ´Ù…Ù„ 13 Ø£Ø³Ø¨ÙˆØ¹ ÙƒØ§Ù…Ù„)
];

let attendanceData = {}; // {studentId-date: 'P'|'A'|'E'|'L'}

function updateAttendanceTable() {
  const grade = document.getElementById('registerGrade')?.value || 'all';
  const section = document.getElementById('registerSection')?.value || 'all';
  
  let filteredStudents = STUDENTS;
  if (grade !== 'all') {
    filteredStudents = filteredStudents.filter(s => s.grade === grade);
  }
  if (section !== 'all') {
    filteredStudents = filteredStudents.filter(s => s.section === section);
  }
  
  if (filteredStudents.length === 0) {
    document.getElementById('attendanceTableContainer').innerHTML = `
      <div style="background:#fff;padding:60px;border-radius:16px;border:1px solid var(--gray-200);text-align:center">
        <div style="font-size:48px;margin-bottom:16px">ğŸ‘¥</div>
        <div style="font-size:16px;font-weight:700;color:var(--navy);margin-bottom:8px">
          Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ø§Ù„Ø¨Ø§Øª
        </div>
        <div style="font-size:13px;color:var(--gray-600);margin-bottom:20px">
          Ø§Ø°Ù‡Ø¨ÙŠ Ù„ØªØ¨ÙˆÙŠØ¨ "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª" Ù„Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©
        </div>
        <button class="btn btn-primary" onclick="showTab('students')">
          â• Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨Ø§Øª
        </button>
      </div>
    `;
    return;
  }
  
  // Generate mock attendance data if not exists
  filteredStudents.forEach(s => {
    ACADEMIC_DAYS.forEach(d => {
      const key = `${s.id}-${d.date}`;
      if (!attendanceData[key]) {
        const statuses = ['P','P','P','P','A','E','L'];
        attendanceData[key] = statuses[Math.floor(Math.random() * statuses.length)];
      }
    });
  });
  
  let tableHtml = `
    <div style="background:#fff;border-radius:12px;border:1px solid var(--gray-200);overflow:hidden">
      <div style="overflow-x:auto">
        <table style="width:100%;border-collapse:collapse;min-width:2000px">
          <thead>
            <!-- Week Headers Row -->
            <tr style="background:linear-gradient(135deg,var(--blue-xs),var(--blue-lt))">
              <th rowspan="2" style="padding:12px;text-align:right;font-size:11px;font-weight:700;color:var(--teal);position:sticky;right:0;background:var(--teal-lt);z-index:10;border-left:2px solid var(--teal)">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø©</th>
              ${(() => {
                let weekHeaders = '';
                let currentWeek = 1;
                let weekDayCount = 0;
                ACADEMIC_DAYS.forEach((d, i) => {
                  if (d.week !== currentWeek) {
                    weekHeaders += `<th colspan="${weekDayCount}" style="padding:10px;text-align:center;font-size:11px;font-weight:800;color:var(--blue);border-left:2px solid var(--blue)">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ ${currentWeek}</th>`;
                    currentWeek = d.week;
                    weekDayCount = 1;
                  } else {
                    weekDayCount++;
                  }
                  if (i === ACADEMIC_DAYS.length - 1) {
                    weekHeaders += `<th colspan="${weekDayCount}" style="padding:10px;text-align:center;font-size:11px;font-weight:800;color:var(--blue);border-left:2px solid var(--blue)">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ ${currentWeek}</th>`;
                  }
                });
                return weekHeaders;
              })()}
              <th rowspan="2" style="padding:12px;text-align:center;font-size:11px;font-weight:700;color:var(--present);background:var(--present-lt)">Ø­</th>
              <th rowspan="2" style="padding:12px;text-align:center;font-size:11px;font-weight:700;color:var(--absent);background:var(--absent-lt)">Øº</th>
              <th rowspan="2" style="padding:12px;text-align:center;font-size:11px;font-weight:700;color:var(--excused);background:var(--excused-lt)">Ø¹</th>
              <th rowspan="2" style="padding:12px;text-align:center;font-size:11px;font-weight:700;color:var(--late);background:var(--late-lt)">Øª</th>
              <th rowspan="2" style="padding:12px;text-align:center;font-size:11px;font-weight:700;color:var(--navy);background:var(--blue-xs)">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</th>
            </tr>
            <!-- Day Headers Row -->
            <tr style="background:var(--teal-lt);border-bottom:2px solid var(--teal)">
              ${ACADEMIC_DAYS.map((d, i) => {
                const isWeekEnd = i === ACADEMIC_DAYS.length - 1 || ACADEMIC_DAYS[i+1]?.week !== d.week;
                return `<th style="padding:10px;text-align:center;font-size:10px;font-weight:700;color:var(--teal);${isWeekEnd ? 'border-left:2px solid var(--blue);' : ''}">${d.day}<br><span style="font-size:9px">${d.hijri}</span></th>`;
              }).join('')}
            </tr>
          </thead>
          <tbody>
  `;
  
  filteredStudents.forEach((student, idx) => {
    let P=0, A=0, E=0, L=0;
    const initials = student.name.split(' ').slice(0,2).map(w=>w[0]).join('');
    
    tableHtml += `<tr style="border-bottom:1px solid var(--gray-100)" onmouseover="this.style.background='var(--teal-lt)'" onmouseout="this.style.background='#fff'">`;
    tableHtml += `
      <td style="padding:12px;position:sticky;right:0;background:#fff;z-index:5;border-left:2px solid var(--gray-100)">
        <div style="display:flex;align-items:center;gap:10px">
          <div style="width:32px;height:32px;border-radius:50%;background:${student.color};display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:800;color:#fff">${initials}</div>
          <div>
            <div style="font-size:13px;font-weight:700;color:var(--navy)">${student.name}</div>
            <div style="font-size:10px;color:var(--gray-600)">${student.id}</div>
          </div>
        </div>
      </td>
    `;
    
    ACADEMIC_DAYS.forEach((d, dayIndex) => {
      const key = `${student.id}-${d.date}`;
      const status = attendanceData[key] || '';
      const statusIcon = {P:'Ø­',A:'Øº',E:'Ø¹',L:'Øª'}[status] || 'â€”';
      const statusColor = {P:'var(--present)',A:'var(--absent)',E:'var(--excused)',L:'var(--late)'}[status] || 'var(--gray-400)';
      const statusBg = {P:'var(--present-lt)',A:'var(--absent-lt)',E:'var(--excused-lt)',L:'var(--late-lt)'}[status] || 'var(--gray-100)';
      
      if(status==='P')P++;else if(status==='A')A++;else if(status==='E')E++;else if(status==='L')L++;
      
      // Check if this is the last day of the week
      const isWeekEnd = dayIndex === ACADEMIC_DAYS.length - 1 || ACADEMIC_DAYS[dayIndex+1]?.week !== d.week;
      
      tableHtml += `
        <td style="padding:8px;text-align:center;${isWeekEnd ? 'border-left:2px solid var(--blue);' : ''}">
          <button onclick="toggleAttendance('${key}')" 
                  style="width:32px;height:28px;background:${statusBg};color:${statusColor};border:none;border-radius:6px;font-size:11px;font-weight:700;cursor:pointer;transition:all .2s"
                  onmouseover="this.style.transform='scale(1.1)'"
                  onmouseout="this.style.transform='scale(1)'">
            ${statusIcon}
          </button>
        </td>
      `;
    });
    
    tableHtml += `
      <td style="padding:12px;text-align:center;font-size:14px;font-weight:800;color:var(--present)">${P}</td>
      <td style="padding:12px;text-align:center;font-size:14px;font-weight:800;color:var(--absent)">${A}</td>
      <td style="padding:12px;text-align:center;font-size:14px;font-weight:800;color:var(--excused)">${E}</td>
      <td style="padding:12px;text-align:center;font-size:14px;font-weight:800;color:var(--late)">${L}</td>
    `;
    
    // Determine action based on unexcused absences
    if (A === 0) {
      // No absences - Certificate
      tableHtml += `
        <td style="padding:12px;text-align:center">
          <button onclick="openCertificate('${student.id}', 'perfect')" 
                  style="padding:6px 12px;background:linear-gradient(135deg,var(--present),#15803d);color:#fff;border:none;border-radius:8px;font-size:10px;font-weight:700;cursor:pointer;transition:all .2s;white-space:nowrap"
                  onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 4px 12px rgba(22,163,74,.3)'"
                  onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='none'">
            ğŸ† Ø´Ù‡Ø§Ø¯Ø© ØªÙƒØ±ÙŠÙ…
          </button>
        </td>
      `;
    } else if (A >= 3) {
      // 3+ unexcused absences - Parent Letter
      tableHtml += `
        <td style="padding:12px;text-align:center">
          <button onclick="openParentLetter('${student.id}')" 
                  style="padding:6px 12px;background:linear-gradient(135deg,var(--absent),#b91c1c);color:#fff;border:none;border-radius:8px;font-size:10px;font-weight:700;cursor:pointer;transition:all .2s;white-space:nowrap"
                  onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 4px 12px rgba(220,38,38,.3)'"
                  onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='none'">
            âœ‰ï¸ Ø®Ø·Ø§Ø¨ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±
          </button>
        </td>
      `;
    } else {
      // 1-2 absences - No action needed
      tableHtml += `
        <td style="padding:12px;text-align:center">
          <span style="font-size:11px;color:var(--gray-400)">â€”</span>
        </td>
      `;
    }
    
    tableHtml += `</tr>`;
  });
  
  tableHtml += `</tbody></table></div></div>`;
  document.getElementById('attendanceTableContainer').innerHTML = tableHtml;
}

function toggleAttendance(key) {
  if (isViewOnly) {
    showToast('âš ï¸ ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø· - Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„');
    return;
  }
  
  const current = attendanceData[key] || '';
  const cycle = {'': 'P', 'P': 'A', 'A': 'E', 'E': 'L', 'L': 'P'};
  attendanceData[key] = cycle[current];
  updateAttendanceTable();
}

function exportAttendanceExcel() {
  showToast('ğŸ“Š Ø¬Ø§Ø±ÙŠ ØªØµØ¯ÙŠØ± Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±...');
  // Implementation here
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  REPORTS SYSTEM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function generateDailyReport() {
  document.getElementById('reportsEmptyState').style.display = 'none';
  document.getElementById('reportContent').style.display = 'block';
  
  const today = new Date().toLocaleDateString('ar-SA');
  document.getElementById('reportTitle').textContent = 'ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ';
  document.getElementById('reportDate').textContent = `Ø§Ù„ØªØ§Ø±ÙŠØ®: ${today} - ${ACADEMIC_DAYS[0].date} Ø´Ø¹Ø¨Ø§Ù† 1448 Ù‡Ù€`;
  
  generateReportStats('daily');
  generateReportCharts('daily');
  generateReportTable('daily');
  
  showToast('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ');
}

function generateWeeklyReport() {
  document.getElementById('reportsEmptyState').style.display = 'none';
  document.getElementById('reportContent').style.display = 'block';
  
  document.getElementById('reportTitle').textContent = 'ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ';
  document.getElementById('reportDate').textContent = 'Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø£ÙˆÙ„: 29 Ø±Ø¬Ø¨ - 3 Ø´Ø¹Ø¨Ø§Ù† 1448 Ù‡Ù€';
  
  generateReportStats('weekly');
  generateReportCharts('weekly');
  generateReportTable('weekly');
  
  showToast('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ');
}

function generateMonthlyReport() {
  document.getElementById('reportsEmptyState').style.display = 'none';
  document.getElementById('reportContent').style.display = 'block';
  
  document.getElementById('reportTitle').textContent = 'ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ø´Ù‡Ø±ÙŠ';
  document.getElementById('reportDate').textContent = 'Ø´Ù‡Ø± Ø´Ø¹Ø¨Ø§Ù† 1448 Ù‡Ù€ (Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ)';
  
  generateReportStats('monthly');
  generateReportCharts('monthly');
  generateReportTable('monthly');
  
  showToast('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø´Ù‡Ø±ÙŠ');
}

function generateReportStats(type) {
  const total = STUDENTS.length * ACADEMIC_DAYS.length;
  const P = Math.floor(total * 0.85);
  const A = Math.floor(total * 0.08);
  const E = Math.floor(total * 0.05);
  const L = total - P - A - E;
  
  document.getElementById('reportStats').innerHTML = `
    <div style="background:var(--blue-xs);padding:16px;border-radius:10px;text-align:center">
      <div style="font-size:28px;font-weight:900;color:var(--blue);margin-bottom:4px">${STUDENTS.length}</div>
      <div style="font-size:11px;color:var(--gray-600)">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª</div>
    </div>
    <div style="background:var(--present-lt);padding:16px;border-radius:10px;text-align:center">
      <div style="font-size:28px;font-weight:900;color:var(--present);margin-bottom:4px">${P}</div>
      <div style="font-size:11px;color:var(--gray-600)">Ø­Ø¶ÙˆØ±</div>
    </div>
    <div style="background:var(--absent-lt);padding:16px;border-radius:10px;text-align:center">
      <div style="font-size:28px;font-weight:900;color:var(--absent);margin-bottom:4px">${A}</div>
      <div style="font-size:11px;color:var(--gray-600)">ØºÙŠØ§Ø¨ Ø¨Ø¯ÙˆÙ† Ø¹Ø°Ø±</div>
    </div>
    <div style="background:var(--excused-lt);padding:16px;border-radius:10px;text-align:center">
      <div style="font-size:28px;font-weight:900;color:var(--excused);margin-bottom:4px">${E}</div>
      <div style="font-size:11px;color:var(--gray-600)">ØºÙŠØ§Ø¨ Ø¨Ø¹Ø°Ø±</div>
    </div>
    <div style="background:var(--late-lt);padding:16px;border-radius:10px;text-align:center">
      <div style="font-size:28px;font-weight:900;color:var(--late);margin-bottom:4px">${L}</div>
      <div style="font-size:11px;color:var(--gray-600)">ØªØ£Ø®ÙŠØ±</div>
    </div>
  `;
}

function generateReportCharts(type) {
  // Placeholder for charts - will use simple HTML/CSS charts
  document.getElementById('pieChart').outerHTML = `
    <div style="text-align:center;padding:40px">
      <div style="font-size:48px;margin-bottom:12px">ğŸ“Š</div>
      <div style="font-size:13px;color:var(--gray-600)">Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ø§Ù„Ø¯Ø§Ø¦Ø±ÙŠ</div>
    </div>
  `;
  
  document.getElementById('barChart').outerHTML = `
    <div style="text-align:center;padding:40px">
      <div style="font-size:48px;margin-bottom:12px">ğŸ“ˆ</div>
      <div style="font-size:13px;color:var(--gray-600)">Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ø§Ù„Ø´Ø±ÙŠØ·ÙŠ</div>
    </div>
  `;
}

function generateReportTable(type) {
  let tableHtml = `
    <table style="width:100%;border-collapse:collapse">
      <thead>
        <tr style="background:var(--gray-50)">
          <th style="padding:10px;text-align:right;border-bottom:2px solid var(--gray-200);font-size:12px">Ø§Ù„Ø·Ø§Ù„Ø¨Ø©</th>
          <th style="padding:10px;text-align:center;border-bottom:2px solid var(--gray-200);font-size:12px">Ø­Ø¶ÙˆØ±</th>
          <th style="padding:10px;text-align:center;border-bottom:2px solid var(--gray-200);font-size:12px">ØºÙŠØ§Ø¨</th>
          <th style="padding:10px;text-align:center;border-bottom:2px solid var(--gray-200);font-size:12px">Ø¹Ø°Ø±</th>
          <th style="padding:10px;text-align:center;border-bottom:2px solid var(--gray-200);font-size:12px">ØªØ£Ø®ÙŠØ±</th>
          <th style="padding:10px;text-align:center;border-bottom:2px solid var(--gray-200);font-size:12px">Ø§Ù„Ù†Ø³Ø¨Ø©</th>
        </tr>
      </thead>
      <tbody>
  `;
  
  STUDENTS.slice(0, 10).forEach(s => {
    const total = ACADEMIC_DAYS.length;
    const p = Math.floor(Math.random() * 3) + total - 3;
    const a = Math.floor(Math.random() * 2);
    const e = Math.floor(Math.random() * 2);
    const l = total - p - a - e;
    const pct = Math.round((p/total)*100);
    
    tableHtml += `
      <tr style="border-bottom:1px solid var(--gray-100)">
        <td style="padding:10px;font-size:12px;font-weight:600">${s.name}</td>
        <td style="padding:10px;text-align:center;color:var(--present);font-weight:700">${p}</td>
        <td style="padding:10px;text-align:center;color:var(--absent);font-weight:700">${a}</td>
        <td style="padding:10px;text-align:center;color:var(--excused);font-weight:700">${e}</td>
        <td style="padding:10px;text-align:center;color:var(--late);font-weight:700">${l}</td>
        <td style="padding:10px;text-align:center;font-weight:800;color:${pct>=90?'var(--present)':'var(--absent)'}">${pct}%</td>
      </tr>
    `;
  });
  
  tableHtml += '</tbody></table>';
  document.getElementById('reportTable').innerHTML = tableHtml;
}

function printReport() {
  window.print();
  showToast('ğŸ–¨ï¸ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©...');
}

function exportReportPDF() {
  showToast('ğŸ“„ Ø¬Ø§Ø±ÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙƒÙ€ PDF...');
}

function exportReportExcel() {
  showToast('ğŸ“Š Ø¬Ø§Ø±ÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙƒÙ€ Excel...');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  STUDENT MANAGEMENT SYSTEM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

let STUDENTS = [];
let studentIdCounter = 1;

const COLORS = [
  '#1e5ef3','#16a34a','#d97706','#7c3aed','#dc2626','#0d9488',
  '#db2777','#0284c7','#9333ea','#b45309','#0f766e','#be185d',
  '#2563eb','#059669','#c026d3','#ea580c','#0891b2','#7c2d12'
];

function addStudent() {
  if (isViewOnly) {
    showToast('âš ï¸ ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø· - Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨Ø§Øª');
    return;
  }
  
  const name = document.getElementById('studentName').value.trim();
  const grade = document.getElementById('studentGrade').value;
  const section = document.getElementById('studentSection').value;
  
  if (!name) {
    showToast('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø©');
    return;
  }
  
  const student = {
    id: `S${String(studentIdCounter).padStart(3, '0')}`,
    name: name,
    grade: grade,
    section: section,
    color: COLORS[(studentIdCounter - 1) % COLORS.length]
  };
  
  STUDENTS.push(student);
  studentIdCounter++;
  
  clearForm();
  renderStudents();
  updateCode();
  showToast('âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨Ø© Ø¨Ù†Ø¬Ø§Ø­');
}

function importBulk() {
  if (isViewOnly) {
    showToast('âš ï¸ ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø· - Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø·Ø§Ù„Ø¨Ø§Øª');
    return;
  }
  
  const text = document.getElementById('bulkImport').value.trim();
  const grade = document.getElementById('bulkGrade').value;
  const section = document.getElementById('bulkSection').value;
  
  if (!text) {
    showToast('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù„ØµÙ‚ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª');
    return;
  }
  
  const names = text.split('\n').filter(n => n.trim());
  let count = 0;
  
  names.forEach(name => {
    const student = {
      id: `S${String(studentIdCounter).padStart(3, '0')}`,
      name: name.trim(),
      grade: grade,
      section: section,
      color: COLORS[(studentIdCounter - 1) % COLORS.length]
    };
    STUDENTS.push(student);
    studentIdCounter++;
    count++;
  });
  
  document.getElementById('bulkImport').value = '';
  renderStudents();
  updateCode();
  showToast(`âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${count} Ø·Ø§Ù„Ø¨Ø© Ø¨Ù†Ø¬Ø§Ø­`);
}

function deleteStudent(index) {
  if (isViewOnly) {
    showToast('âš ï¸ ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø· - Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø­Ø°Ù Ø·Ø§Ù„Ø¨Ø§Øª');
    return;
  }
  
  if (confirm('Ù‡Ù„ Ø£Ù†ØªÙ Ù…ØªØ£ÙƒØ¯Ø© Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø·Ø§Ù„Ø¨Ø©ØŸ')) {
    STUDENTS.splice(index, 1);
    renderStudents();
    updateCode();
    showToast('ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ø·Ø§Ù„Ø¨Ø©');
  }
}

function clearForm() {
  document.getElementById('studentName').value = '';
}

function clearAll() {
  if (confirm('Ù‡Ù„ Ø£Ù†ØªÙ Ù…ØªØ£ÙƒØ¯Ø© Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ø§Ù„Ø¨Ø§ØªØŸ')) {
    STUDENTS = [];
    studentIdCounter = 1;
    renderStudents();
    updateCode();
    showToast('ğŸ—‘ï¸ ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª');
  }
}

function renderStudents() {
  const list = document.getElementById('studentsList');
  document.getElementById('studentCount').textContent = STUDENTS.length;
  
  if (STUDENTS.length === 0) {
    list.innerHTML = '<div style="text-align:center;padding:40px;color:var(--gray-600)">Ù„Ù… ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨Ø§Øª Ø¨Ø¹Ø¯</div>';
    return;
  }
  
  let html = '';
  STUDENTS.forEach((s, i) => {
    const initials = s.name.split(' ').slice(0, 2).map(w => w[0]).join('');
    const gradeName = {first:'Ø§Ù„Ø£ÙˆÙ„',second:'Ø§Ù„Ø«Ø§Ù†ÙŠ',third:'Ø§Ù„Ø«Ø§Ù„Ø«'}[s.grade];
    html += `
      <div class="student-item">
        <div class="student-avatar" style="background:${s.color}">${initials}</div>
        <div class="student-info">
          <div class="student-name">${s.name}</div>
          <div class="student-meta">${s.id} â€¢ ${gradeName} Ø«Ø§Ù†ÙˆÙŠ â€¢ Ø´Ø¹Ø¨Ø© ${s.section}</div>
        </div>
        <div class="student-actions">
          <button class="btn-icon btn-delete" onclick="deleteStudent(${i})">ğŸ—‘ï¸</button>
        </div>
      </div>
    `;
  });
  list.innerHTML = html;
}

function updateCode() {
  if (STUDENTS.length === 0) {
    document.getElementById('codeContent').textContent = '// Ù„Ù… ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨Ø§Øª Ø¨Ø¹Ø¯';
    return;
  }
  
  let code = 'const STUDENTS = [\n';
  STUDENTS.forEach((s, i) => {
    code += `  {id:'${s.id}', name:'${s.name}', grade:'${s.grade}', section:'${s.section}', color:'${s.color}'}`;
    if (i < STUDENTS.length - 1) code += ',';
    code += '\n';
  });
  code += '];';
  
  document.getElementById('codeContent').textContent = code;
}

function copyCode() {
  const code = document.getElementById('codeContent').textContent;
  navigator.clipboard.writeText(code).then(() => {
    showToast('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­');
  });
}

function applyToSystem() {
  if (STUDENTS.length === 0) {
    showToast('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨Ø§Øª Ø£ÙˆÙ„Ø§Ù‹');
    return;
  }
  showToast('âœ… ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¸Ø§Ù…');
  // Here you would update the main attendance system with the new STUDENTS array
  console.log('Applied students:', STUDENTS);
}

function showToast(msg) {
  const toast = document.createElement('div');
  toast.style.cssText = 'position:fixed;bottom:24px;left:50%;transform:translateX(-50%);background:#0a2463;color:#fff;padding:12px 24px;border-radius:12px;font-family:Cairo,sans-serif;font-size:13px;font-weight:700;z-index:9999;box-shadow:0 8px 24px rgba(0,0,0,.3)';
  toast.textContent = msg;
  document.body.appendChild(toast);
  setTimeout(() => toast.remove(), 2500);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  TAB NAVIGATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function showTab(tabName) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  
  document.getElementById('tab-' + tabName).classList.add('active');
  event.currentTarget.classList.add('active');
  
  // Update content based on tab
  if (tabName === 'register') {
    updateAttendanceTable();
  }
  if (tabName === 'admin') {
    renderAdminDashboard();
  }
  if (tabName === 'certificates') {
    generateCertificates();
  }
}

function renderAdminDashboard() {
  const teamColors = {
    'Ù…Ø¯ÙŠØ±Ø© Ø§Ù„Ù…Ø¯Ø±Ø³Ø©': '#ec4899',
    'ÙˆÙƒÙŠÙ„Ø© Ø´Ø¤ÙˆÙ† Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª': '#8b5cf6',
    'Ù…Ø¹Ù„Ù…Ø© Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©': '#1e5ef3',
    'Ù…Ø¹Ù„Ù…Ø©': '#16a34a'
  };
  
  const teamMembers = Object.entries(ADMIN_PASSWORDS).map(([password, user]) => ({
    ...user,
    password: password,
    color: teamColors[user.role] || '#0d9488',
    online: currentUser && currentUser.name === user.name
  }));
  
  let html = '';
  teamMembers.forEach((member, index) => {
    const initials = member.name.split(' ').slice(0,2).map(w=>w[0]).join('');
    const statusColor = member.online ? 'var(--present)' : 'var(--gray-400)';
    const statusText = member.online ? 'â— Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†' : 'â—‹ ØºÙŠØ± Ù…ØªØµÙ„';
    const statusBg = member.online ? 'var(--present-lt)' : 'var(--gray-100)';
    
    html += `
      <div style="display:flex;align-items:center;gap:14px;padding:14px;background:var(--gray-50);border-radius:12px;transition:all .2s;border:2px solid ${member.online ? 'var(--present)' : 'transparent'}" 
           onmouseover="this.style.background='var(--blue-xs)'" 
           onmouseout="this.style.background='var(--gray-50)'">
        <div style="width:48px;height:48px;border-radius:50%;background:${member.color};display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:800;color:#fff;flex-shrink:0">
          ${initials}
        </div>
        <div style="flex:1">
          <div style="font-size:14px;font-weight:700;color:var(--navy);margin-bottom:2px">${member.name}</div>
          <div style="font-size:11px;color:var(--gray-600)">${member.role}</div>
        </div>
        <div style="text-align:left;min-width:120px">
          <div style="display:inline-block;padding:6px 12px;background:${statusBg};border-radius:8px;font-size:11px;font-weight:700;color:${statusColor};margin-bottom:4px">
            ${statusText}
          </div>
          <div style="font-size:10px;color:var(--gray-400)">Ø±Ù‚Ù… Ø³Ø±ÙŠ: ${member.password}</div>
        </div>
      </div>
    `;
  });
  
  document.getElementById('teamMembersList').innerHTML = html;
  
  // Update online count
  const onlineCount = teamMembers.filter(m => m.online).length;
  document.getElementById('onlineCount').textContent = onlineCount;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CERTIFICATES SYSTEM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function generateCertificates() {
  if (STUDENTS.length === 0) {
    showToast('âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ø§Ù„Ø¨Ø§Øª ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…');
    return;
  }
  
  // Mock attendance data for demo
  const studentsWithAttendance = STUDENTS.map(s => {
    const totalDays = 20;
    const present = Math.floor(Math.random() * 5) + 16; // 16-20 days
    const percentage = Math.round((present / totalDays) * 100);
    return {
      ...s,
      totalDays,
      present,
      percentage,
      absent: totalDays - present
    };
  });
  
  const perfectAttendance = studentsWithAttendance.filter(s => s.percentage === 100);
  const excellentAttendance = studentsWithAttendance.filter(s => s.percentage >= 95 && s.percentage < 100);
  const goodAttendance = studentsWithAttendance.filter(s => s.percentage >= 90 && s.percentage < 95);
  
  document.getElementById('perfectAttendanceCount').textContent = perfectAttendance.length;
  document.getElementById('excellentAttendanceCount').textContent = excellentAttendance.length;
  document.getElementById('goodAttendanceCount').textContent = goodAttendance.length;
  
  let html = '';
  
  // Perfect attendance certificates
  perfectAttendance.forEach(student => {
    html += renderCertificateCard(student, 'perfect');
  });
  
  // Excellent attendance certificates
  excellentAttendance.forEach(student => {
    html += renderCertificateCard(student, 'excellent');
  });
  
  if (html === '') {
    html = '<div style="grid-column:1/-1;text-align:center;padding:60px;color:var(--gray-400)"><div style="font-size:48px;margin-bottom:12px">ğŸ†</div><div style="font-size:16px;font-weight:600">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ø§Ù„Ø¨Ø§Øª Ù…Ø³ØªØ­Ù‚Ø§Øª Ù„Ø´Ù‡Ø§Ø¯Ø§Øª Ø§Ù„Ø´ÙƒØ± Ø­Ø§Ù„ÙŠØ§Ù‹</div><div style="font-size:13px;margin-top:6px">Ø³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±</div></div>';
  }
  
  document.getElementById('certificatesGrid').innerHTML = html;
  showToast('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª');
}

function renderCertificateCard(student, level) {
  const badge = level === 'perfect' ? 'ğŸ¥‡ Ø­Ø¶ÙˆØ± Ù…Ø«Ø§Ù„ÙŠ' : 'ğŸ¥ˆ Ø­Ø¶ÙˆØ± Ù…Ù…ØªØ§Ø²';
  const badgeColor = level === 'perfect' ? 'var(--present)' : 'var(--blue)';
  const badgeBg = level === 'perfect' ? 'var(--present-lt)' : 'var(--blue-lt)';
  
  return `
    <div style="background:var(--gray-50);border-radius:12px;padding:16px;border:2px solid ${level==='perfect'?'var(--present)':'var(--blue)'};transition:all .2s;cursor:pointer"
         onmouseover="this.style.transform='translateY(-4px)';this.style.boxShadow='var(--shadow-md)'"
         onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='none'"
         onclick="openCertificate('${student.id}', '${level}')">
      <div style="display:flex;align-items:center;gap:10px;margin-bottom:12px">
        <div style="width:44px;height:44px;border-radius:50%;background:${student.color};display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:800;color:#fff">
          ${student.name.split(' ').slice(0,2).map(w=>w[0]).join('')}
        </div>
        <div style="flex:1">
          <div style="font-size:13px;font-weight:700;color:var(--navy)">${student.name}</div>
          <div style="font-size:10px;color:var(--gray-600)">${student.id}</div>
        </div>
      </div>
      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:10px">
        <span style="font-size:11px;color:var(--gray-600)">Ù†Ø³Ø¨Ø© Ø§Ù„Ø­Ø¶ÙˆØ±</span>
        <span style="font-size:18px;font-weight:900;color:${badgeColor}">${student.percentage}%</span>
      </div>
      <div style="padding:8px 12px;background:${badgeBg};color:${badgeColor};border-radius:8px;font-size:11px;font-weight:700;text-align:center;margin-bottom:10px">
        ${badge}
      </div>
      <button style="width:100%;padding:8px;background:linear-gradient(135deg,var(--blue),var(--navy));color:#fff;border:none;border-radius:8px;font-family:'Cairo',sans-serif;font-size:11px;font-weight:700;cursor:pointer"
              onclick="event.stopPropagation();openCertificate('${student.id}', '${level}')">
        ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©
      </button>
    </div>
  `;
}

function openCertificate(studentId, level) {
  const student = STUDENTS.find(s => s.id === studentId);
  if (!student) return;
  
  const today = new Date().toLocaleDateString('ar-SA');
  const certificateHtml = `
    <div style="width:210mm;min-height:297mm;padding:30mm;background:#fff;position:relative;font-family:'Amiri',serif">
      <!-- Decorative Border -->
      <div style="position:absolute;inset:15mm;border:4px double ${level==='perfect'?'#FFD700':'var(--blue)'};border-radius:20px"></div>
      <div style="position:absolute;inset:17mm;border:2px solid ${level==='perfect'?'#FFD700':'var(--blue)'};border-radius:18px"></div>
      
      <!-- Content -->
      <div style="position:relative;z-index:1;text-align:center">
        <!-- Header -->
        <div style="margin-bottom:20mm">
          <div style="font-size:16px;color:#14b8a6;font-weight:700;margin-bottom:5mm">Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</div>
          <div style="font-size:18px;color:var(--navy);font-weight:800;margin-bottom:5mm">ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…</div>
          <div style="font-size:14px;color:var(--gray-600);margin-bottom:3mm">Ø¥Ø¯Ø§Ø±Ø© ØªØ¹Ù„ÙŠÙ… Ø¬Ø§Ø²Ø§Ù†</div>
          <div style="font-size:14px;color:var(--navy);font-weight:700">Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø¨Ø¬Ø§Ø²Ø§Ù†</div>
        </div>
        
        <!-- Certificate Icon -->
        <div style="font-size:60px;margin-bottom:10mm">${level==='perfect'?'ğŸ¥‡':'ğŸ¥ˆ'}</div>
        
        <!-- Title -->
        <div style="font-size:32px;font-weight:900;color:var(--navy);margin-bottom:15mm;text-decoration:underline;text-decoration-color:${level==='perfect'?'#FFD700':'var(--blue)'}">
          Ø´Ù€Ù‡Ù€Ø§Ø¯Ø© Ø´Ù€ÙƒÙ€Ø± ÙˆØªÙ€Ù‚Ù€Ø¯ÙŠÙ€Ø±
        </div>
        
        <!-- Body -->
        <div style="font-size:18px;line-height:2.5;color:var(--gray-800);margin-bottom:15mm">
          <p style="margin-bottom:10mm">ØªÙÙ€Ù‡Ù€Ø¯ÙŠ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø¨Ø¬Ø§Ø²Ø§Ù†</p>
          <p style="margin-bottom:10mm">Ù‡Ø°Ù‡ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø·Ø§Ù„Ø¨Ø© Ø§Ù„Ù…ØªÙ…ÙŠØ²Ø©</p>
          <div style="font-size:28px;font-weight:900;color:${level==='perfect'?'#FFD700':'var(--blue)'};margin:15mm 0;padding:10mm;background:${level==='perfect'?'rgba(255,215,0,.1)':'var(--blue-xs)'};border-radius:12px">
            ${student.name}
          </div>
          <p style="margin-bottom:10mm">ÙˆØ°Ù„Ùƒ ØªÙ‚Ø¯ÙŠØ±Ø§Ù‹ Ù„Ø­Ø¶ÙˆØ±Ù‡Ø§ ${level==='perfect'?'Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ ÙˆØ§Ù„Ù…ØªÙ…ÙŠØ²':'Ø§Ù„Ù…Ù…ØªØ§Ø²'}</p>
          <p>ÙˆØ§Ù„ØªØ²Ø§Ù…Ù‡Ø§ Ø¨Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø· Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ</p>
        </div>
        
        <!-- Stats -->
        <div style="display:inline-block;background:var(--gray-50);padding:15mm;border-radius:12px;margin-bottom:15mm">
          <div style="font-size:48px;font-weight:900;color:${level==='perfect'?'#FFD700':'var(--blue)'};margin-bottom:5mm">100%</div>
          <div style="font-size:14px;color:var(--gray-600)">Ù†Ø³Ø¨Ø© Ø§Ù„Ø­Ø¶ÙˆØ± Ø®Ù„Ø§Ù„ Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ</div>
        </div>
        
        <!-- Footer -->
        <div style="display:flex;justify-content:space-between;margin-top:20mm;padding-top:10mm;border-top:2px solid var(--gray-200)">
          <div style="text-align:center">
            <div style="font-size:12px;color:var(--gray-600);margin-bottom:15mm">Ù…Ø¯ÙŠØ±Ø© Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</div>
            <div style="font-size:16px;font-weight:700;color:var(--navy);border-top:2px solid var(--navy);padding-top:5mm;min-width:50mm">Ø£. Ù‡Ø¨Ù‡ ØµÙ…</div>
          </div>
          <div style="text-align:center">
            <div style="font-size:12px;color:var(--gray-600);margin-bottom:5mm">Ø§Ù„ØªØ§Ø±ÙŠØ®</div>
            <div style="font-size:14px;font-weight:700;color:var(--navy)">${today}</div>
            <div style="font-size:12px;color:var(--gray-600);margin-top:5mm">Ø§Ù„Ø¹Ø§Ù… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ 1447-1448 Ù‡Ù€</div>
          </div>
          <div style="text-align:center">
            <div style="font-size:12px;color:var(--gray-600);margin-bottom:15mm">Ø§Ù„Ù…Ø´Ø±ÙØ©</div>
            <div style="font-size:16px;font-weight:700;color:var(--navy);border-top:2px solid var(--navy);padding-top:5mm;min-width:50mm">Ø£. Ø¹ÙŠØ´Ø© Ø¹ÙˆØ§Ø¬ÙŠ</div>
          </div>
        </div>
      </div>
    </div>
  `;
  
  document.getElementById('certificateContent').innerHTML = certificateHtml;
  document.getElementById('certificateModal').style.display = 'block';
}

function closeCertificate() {
  document.getElementById('certificateModal').style.display = 'none';
}

function openParentLetter(studentId) {
  const student = STUDENTS.find(s => s.id === studentId);
  if (!student) return;
  
  // Count absences
  let P=0, A=0, E=0, L=0, total=0;
  ACADEMIC_DAYS.forEach(d => {
    const key = `${student.id}-${d.date}`;
    const status = attendanceData[key];
    if(status==='P')P++;else if(status==='A')A++;else if(status==='E')E++;else if(status==='L')L++;
    if(status)total++;
  });
  
  const today = new Date().toLocaleDateString('ar-SA');
  const percentage = total > 0 ? Math.round((P / total) * 100) : 0;
  
  const letterHtml = `
    <div style="width:210mm;min-height:297mm;padding:20mm;background:#fff;font-family:'Amiri',serif;position:relative">
      <!-- Header -->
      <div style="text-align:center;margin-bottom:15mm;padding-bottom:10mm;border-bottom:3px solid var(--navy)">
        <div style="display:flex;justify-content:space-between;align-items:start;margin-bottom:10mm">
          <div style="text-align:right">
            <div style="font-size:14px;color:#14b8a6;font-weight:700;margin-bottom:3mm">Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</div>
            <div style="font-size:16px;color:var(--navy);font-weight:800;margin-bottom:3mm">ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…</div>
            <div style="font-size:12px;color:var(--gray-600);margin-bottom:2mm">Ø¥Ø¯Ø§Ø±Ø© ØªØ¹Ù„ÙŠÙ… Ø¬Ø§Ø²Ø§Ù†</div>
            <div style="font-size:12px;color:var(--navy);font-weight:700">Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø¨Ø¬Ø§Ø²Ø§Ù†</div>
          </div>
          <img src="ministry-logo.png" style="width:60px;height:60px;object-fit:contain" onerror="this.style.display='none'">
          <div style="text-align:left;direction:ltr;font-family:Arial">
            <div style="font-size:14px;color:#14b8a6;font-weight:700;margin-bottom:3mm">Kingdom of Saudi Arabia</div>
            <div style="font-size:16px;color:var(--navy);font-weight:800;margin-bottom:3mm">Ministry of Education</div>
            <div style="font-size:12px;color:var(--gray-600);margin-bottom:2mm">Jazan Education Department</div>
            <div style="font-size:12px;color:var(--navy);font-weight:700">First High School - Jazan</div>
          </div>
        </div>
      </div>
      
      <!-- Letter Content -->
      <div style="margin-bottom:15mm">
        <div style="text-align:right;margin-bottom:10mm">
          <div style="font-size:14px;margin-bottom:5mm">Ø§Ù„ØªØ§Ø±ÙŠØ®: ${today}</div>
          <div style="font-size:14px">Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹: <span style="font-weight:700;color:var(--absent)">Ø¥Ø´Ø¹Ø§Ø± ÙˆÙ„ÙŠ Ø£Ù…Ø± Ø·Ø§Ù„Ø¨Ø© Ø¨Ø§Ù„ØºÙŠØ§Ø¨</span></div>
        </div>
        
        <div style="font-size:16px;line-height:2.5;text-align:justify">
          <p style="margin-bottom:8mm">Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ… ÙˆØ±Ø­Ù…Ø© Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø±ÙƒØ§ØªÙ‡ØŒØŒØŒ</p>
          
          <p style="margin-bottom:8mm">ÙˆÙ„ÙŠ Ø£Ù…Ø± Ø§Ù„Ø·Ø§Ù„Ø¨Ø© / <span style="font-weight:800;color:var(--navy);font-size:18px">${student.name}</span></p>
          
          <p style="margin-bottom:8mm">ØªØ­ÙŠØ© Ø·ÙŠØ¨Ø© ÙˆØ¨Ø¹Ø¯ØŒØŒØŒ</p>
          
          <p style="margin-bottom:8mm">Ù†Ø­ÙŠØ·ÙƒÙ… Ø¹Ù„Ù…Ø§Ù‹ Ø¨Ø£Ù† Ø§Ø¨Ù†ØªÙƒÙ… Ø§Ù„Ø·Ø§Ù„Ø¨Ø© Ø§Ù„Ù…Ø°ÙƒÙˆØ±Ø© Ø£Ø¹Ù„Ø§Ù‡ Ù‚Ø¯ ØªØºÙŠØ¨Øª Ø¹Ù† Ø§Ù„Ø¯ÙˆØ§Ù… Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ Ø¨Ø¯ÙˆÙ† Ø¹Ø°Ø± Ù…Ù‚Ø¨ÙˆÙ„ØŒ ÙˆØ°Ù„Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø­Ùˆ Ø§Ù„ØªØ§Ù„ÙŠ:</p>
        </div>
        
        <!-- Attendance Statistics Table -->
        <div style="margin:10mm 0;padding:8mm;background:var(--gray-50);border-radius:8px;border:2px solid var(--absent)">
          <table style="width:100%;border-collapse:collapse;font-size:14px">
            <thead>
              <tr style="background:var(--absent-lt)">
                <th style="padding:8px;border:1px solid var(--absent);text-align:center;font-weight:700">Ø§Ù„Ø¨ÙŠØ§Ù†</th>
                <th style="padding:8px;border:1px solid var(--absent);text-align:center;font-weight:700;color:var(--present)">Ø­Ø¶ÙˆØ±</th>
                <th style="padding:8px;border:1px solid var(--absent);text-align:center;font-weight:700;color:var(--absent)">ØºÙŠØ§Ø¨ Ø¨Ø¯ÙˆÙ† Ø¹Ø°Ø±</th>
                <th style="padding:8px;border:1px solid var(--absent);text-align:center;font-weight:700;color:var(--excused)">ØºÙŠØ§Ø¨ Ø¨Ø¹Ø°Ø±</th>
                <th style="padding:8px;border:1px solid var(--absent);text-align:center;font-weight:700;color:var(--late)">ØªØ£Ø®ÙŠØ±</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td style="padding:8px;border:1px solid var(--gray-200);text-align:center;font-weight:700">Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…</td>
                <td style="padding:8px;border:1px solid var(--gray-200);text-align:center;font-weight:800;font-size:16px;color:var(--present)">${P}</td>
                <td style="padding:8px;border:1px solid var(--gray-200);text-align:center;font-weight:800;font-size:16px;color:var(--absent)">${A}</td>
                <td style="padding:8px;border:1px solid var(--gray-200);text-align:center;font-weight:800;font-size:16px;color:var(--excused)">${E}</td>
                <td style="padding:8px;border:1px solid var(--gray-200);text-align:center;font-weight:800;font-size:16px;color:var(--late)">${L}</td>
              </tr>
              <tr>
                <td style="padding:8px;border:1px solid var(--gray-200);text-align:center;font-weight:700">Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ©</td>
                <td style="padding:8px;border:1px solid var(--gray-200);text-align:center;font-weight:800;color:var(--present)">${percentage}%</td>
                <td style="padding:8px;border:1px solid var(--gray-200);text-align:center;font-weight:800;color:var(--absent)">${Math.round((A/total)*100)}%</td>
                <td style="padding:8px;border:1px solid var(--gray-200);text-align:center;font-weight:800;color:var(--excused)">${Math.round((E/total)*100)}%</td>
                <td style="padding:8px;border:1px solid var(--gray-200);text-align:center;font-weight:800;color:var(--late)">${Math.round((L/total)*100)}%</td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div style="font-size:16px;line-height:2.5;text-align:justify">
          <p style="margin-bottom:8mm">Ù†Ø£Ù…Ù„ Ù…Ù† Ø³ÙŠØ§Ø¯ØªÙƒÙ… Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ø¨Ù†ØªÙƒÙ… ÙˆØ§Ù„ØªØ£ÙƒÙŠØ¯ Ø¹Ù„ÙŠÙ‡Ø§ Ø¨Ø£Ù‡Ù…ÙŠØ© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ù… ÙÙŠ Ø§Ù„Ø¯ÙˆØ§Ù… Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØŒ Ø­ÙŠØ« Ø£Ù† ÙƒØ«Ø±Ø© Ø§Ù„ØºÙŠØ§Ø¨ ØªØ¤Ø«Ø± Ø³Ù„Ø¨Ø§Ù‹ Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆØ§Ù‡Ø§ Ø§Ù„ØªØ­ØµÙŠÙ„ÙŠ.</p>
          
          <p style="margin-bottom:8mm;padding:8mm;background:var(--absent-lt);border-right:4px solid var(--absent);border-radius:4px">
            <span style="font-weight:700;color:var(--absent)">ØªÙ†Ø¨ÙŠÙ‡ Ù‡Ø§Ù…:</span> ÙÙŠ Ø­Ø§Ù„ Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø§Ù„ØºÙŠØ§Ø¨ Ø§Ù„Ù…ØªÙƒØ±Ø±ØŒ Ø³ØªØ¶Ø·Ø± Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ù„Ø§ØªØ®Ø§Ø° Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠØ© ÙˆÙÙ‚Ø§Ù‹ Ù„Ù„ÙˆØ§Ø¦Ø­ ÙˆØ§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù…Ø¹Ù…ÙˆÙ„ Ø¨Ù‡Ø§.
          </p>
          
          <p>Ø´Ø§ÙƒØ±ÙŠÙ† Ù„ÙƒÙ… Ø­Ø³Ù† ØªØ¹Ø§ÙˆÙ†ÙƒÙ…ØŒØŒØŒ</p>
        </div>
      </div>
      
      <!-- Signatures -->
      <div style="display:flex;justify-content:space-between;margin-top:20mm;padding-top:10mm;border-top:2px solid var(--gray-200)">
        <div style="text-align:center">
          <div style="font-size:12px;color:var(--gray-600);margin-bottom:15mm">Ù…Ø¯ÙŠØ±Ø© Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</div>
          <div style="font-size:14px;font-weight:700;color:var(--navy);border-top:2px solid var(--navy);padding-top:5mm;min-width:60mm">Ø£. Ù‡Ø¨Ù‡ ØµÙ…</div>
          <div style="font-size:11px;color:var(--gray-600);margin-top:3mm">Ø§Ù„Ø®ØªÙ…</div>
        </div>
        <div style="text-align:center">
          <div style="font-size:12px;color:var(--gray-600);margin-bottom:15mm">Ø§Ù„Ù…Ø´Ø±ÙØ©</div>
          <div style="font-size:14px;font-weight:700;color:var(--navy);border-top:2px solid var(--navy);padding-top:5mm;min-width:60mm">Ø£. Ø¹ÙŠØ´Ø© Ø¹ÙˆØ§Ø¬ÙŠ</div>
          <div style="font-size:10px;color:var(--gray-600);margin-top:3mm">ÙˆÙƒÙŠÙ„Ø© Ø´Ø¤ÙˆÙ† Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª</div>
        </div>
      </div>
      
      <!-- Footer -->
      <div style="position:absolute;bottom:15mm;left:20mm;right:20mm;text-align:center;padding-top:8mm;border-top:1px solid var(--gray-200)">
        <div style="font-size:11px;color:var(--gray-600)">Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø¨Ø¬Ø§Ø²Ø§Ù† â€¢ Ø¥Ø¯Ø§Ø±Ø© ØªØ¹Ù„ÙŠÙ… Ø¬Ø§Ø²Ø§Ù† â€¢ ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ… â€¢ Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</div>
        <div style="font-size:10px;color:var(--gray-400);margin-top:2mm">Ø§Ù„Ø¹Ø§Ù… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ 1447-1448 Ù‡Ù€ (2025-2026 Ù…)</div>
      </div>
    </div>
  `;
  
  document.getElementById('certificateContent').innerHTML = letterHtml;
  document.getElementById('certificateModal').style.display = 'block';
}

function printAllCertificates() {
  showToast('ğŸ–¨ï¸ Ø¬Ø§Ø±ÙŠ ØªØ¬Ù‡ÙŠØ² Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©...');
  // Implementation for batch printing
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

renderStudents();
updateCode();
updateAttendanceTable();

// Add some sample data for demo
setTimeout(() => {
  document.getElementById('headerStats').innerHTML = `
    <div class="header-stat"><div class="sv">${STUDENTS.length}</div><div class="sl">Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª</div></div>
    <div class="header-stat"><div class="sv">13</div><div class="sl">Ø£Ø³Ø§Ø¨ÙŠØ¹</div></div>
    <div class="header-stat"><div class="sv">29/7</div><div class="sl">Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ÙØµÙ„</div></div>
  `;
}, 100);

console.log('âœ… Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒØ§Ù…Ù„ Ø¬Ø§Ù‡Ø²!');
console.log('ğŸ“‹ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª + Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ± + Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± + Ø´Ù‡Ø§Ø¯Ø§Øª + Ø®Ø·Ø§Ø¨Ø§Øª + Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©');
console.log('ğŸ“… Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ÙØµÙ„: 29 Ø±Ø¬Ø¨ 1448 Ù‡Ù€ (27 ÙŠÙ†Ø§ÙŠØ± 2026 Ù…)');

// Auto-update attendance table when students change
setTimeout(() => {
  if (typeof updateAttendanceTable === 'function') {
    updateAttendanceTable();
  }
}, 1000);
</script>

</body>
</html>